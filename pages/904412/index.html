<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>内置模块 | 麦仁博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="记录前端知识、读书学习">
    
    <link rel="preload" href="/Myblog/assets/css/0.styles.baca3271.css" as="style"><link rel="preload" href="/Myblog/assets/js/app.b4d326d4.js" as="script"><link rel="preload" href="/Myblog/assets/js/2.65a1fad6.js" as="script"><link rel="preload" href="/Myblog/assets/js/29.bf7a886c.js" as="script"><link rel="prefetch" href="/Myblog/assets/js/10.9b2e5a65.js"><link rel="prefetch" href="/Myblog/assets/js/100.bbfeff88.js"><link rel="prefetch" href="/Myblog/assets/js/101.8ac37b00.js"><link rel="prefetch" href="/Myblog/assets/js/102.fd6c9f86.js"><link rel="prefetch" href="/Myblog/assets/js/103.48abf68e.js"><link rel="prefetch" href="/Myblog/assets/js/104.02681ee8.js"><link rel="prefetch" href="/Myblog/assets/js/105.ef4f3ee4.js"><link rel="prefetch" href="/Myblog/assets/js/106.c6423f70.js"><link rel="prefetch" href="/Myblog/assets/js/107.b6f10793.js"><link rel="prefetch" href="/Myblog/assets/js/108.4190be01.js"><link rel="prefetch" href="/Myblog/assets/js/109.1789a63d.js"><link rel="prefetch" href="/Myblog/assets/js/11.c42049c9.js"><link rel="prefetch" href="/Myblog/assets/js/110.fedb2950.js"><link rel="prefetch" href="/Myblog/assets/js/111.c27edfb6.js"><link rel="prefetch" href="/Myblog/assets/js/112.35069dc8.js"><link rel="prefetch" href="/Myblog/assets/js/113.649d1dad.js"><link rel="prefetch" href="/Myblog/assets/js/114.2311e157.js"><link rel="prefetch" href="/Myblog/assets/js/115.edd2ccbc.js"><link rel="prefetch" href="/Myblog/assets/js/116.61fa2b78.js"><link rel="prefetch" href="/Myblog/assets/js/117.35097a24.js"><link rel="prefetch" href="/Myblog/assets/js/118.091a2ba6.js"><link rel="prefetch" href="/Myblog/assets/js/119.fecac607.js"><link rel="prefetch" href="/Myblog/assets/js/12.feb20eda.js"><link rel="prefetch" href="/Myblog/assets/js/120.1536e533.js"><link rel="prefetch" href="/Myblog/assets/js/121.183a0d4f.js"><link rel="prefetch" href="/Myblog/assets/js/122.d01869e2.js"><link rel="prefetch" href="/Myblog/assets/js/123.2c016da4.js"><link rel="prefetch" href="/Myblog/assets/js/124.a6ba155f.js"><link rel="prefetch" href="/Myblog/assets/js/125.e379589b.js"><link rel="prefetch" href="/Myblog/assets/js/126.a86c02f8.js"><link rel="prefetch" href="/Myblog/assets/js/127.156e1a9b.js"><link rel="prefetch" href="/Myblog/assets/js/128.948f93fd.js"><link rel="prefetch" href="/Myblog/assets/js/129.cceca0fc.js"><link rel="prefetch" href="/Myblog/assets/js/13.81681fe5.js"><link rel="prefetch" href="/Myblog/assets/js/130.10f56fde.js"><link rel="prefetch" href="/Myblog/assets/js/131.53953ae1.js"><link rel="prefetch" href="/Myblog/assets/js/132.816876a8.js"><link rel="prefetch" href="/Myblog/assets/js/133.28cf1cf2.js"><link rel="prefetch" href="/Myblog/assets/js/134.54f66be9.js"><link rel="prefetch" href="/Myblog/assets/js/135.beafffdb.js"><link rel="prefetch" href="/Myblog/assets/js/136.aabfdd0c.js"><link rel="prefetch" href="/Myblog/assets/js/137.0f3d7d89.js"><link rel="prefetch" href="/Myblog/assets/js/138.52431fd3.js"><link rel="prefetch" href="/Myblog/assets/js/139.6b7179a9.js"><link rel="prefetch" href="/Myblog/assets/js/14.a80f6468.js"><link rel="prefetch" href="/Myblog/assets/js/140.3611a35e.js"><link rel="prefetch" href="/Myblog/assets/js/141.6e15f845.js"><link rel="prefetch" href="/Myblog/assets/js/142.55b1acc7.js"><link rel="prefetch" href="/Myblog/assets/js/143.1607e5e7.js"><link rel="prefetch" href="/Myblog/assets/js/144.66eb7337.js"><link rel="prefetch" href="/Myblog/assets/js/145.6dfc50d7.js"><link rel="prefetch" href="/Myblog/assets/js/146.d60debf9.js"><link rel="prefetch" href="/Myblog/assets/js/147.e8d6d96a.js"><link rel="prefetch" href="/Myblog/assets/js/148.24d24085.js"><link rel="prefetch" href="/Myblog/assets/js/149.99d7f5ca.js"><link rel="prefetch" href="/Myblog/assets/js/15.075dec26.js"><link rel="prefetch" href="/Myblog/assets/js/150.827479f0.js"><link rel="prefetch" href="/Myblog/assets/js/151.43a217df.js"><link rel="prefetch" href="/Myblog/assets/js/152.5ac86474.js"><link rel="prefetch" href="/Myblog/assets/js/153.fff0a516.js"><link rel="prefetch" href="/Myblog/assets/js/154.7f94deae.js"><link rel="prefetch" href="/Myblog/assets/js/155.32ffe7a2.js"><link rel="prefetch" href="/Myblog/assets/js/156.40766e9e.js"><link rel="prefetch" href="/Myblog/assets/js/157.9cb5955f.js"><link rel="prefetch" href="/Myblog/assets/js/158.e40e4ec8.js"><link rel="prefetch" href="/Myblog/assets/js/159.e2e92cd0.js"><link rel="prefetch" href="/Myblog/assets/js/16.b85bc685.js"><link rel="prefetch" href="/Myblog/assets/js/160.68a18094.js"><link rel="prefetch" href="/Myblog/assets/js/161.d236be02.js"><link rel="prefetch" href="/Myblog/assets/js/162.7bf4e0ed.js"><link rel="prefetch" href="/Myblog/assets/js/163.4bec2b32.js"><link rel="prefetch" href="/Myblog/assets/js/164.6d67f5a4.js"><link rel="prefetch" href="/Myblog/assets/js/165.135d944c.js"><link rel="prefetch" href="/Myblog/assets/js/166.9bd41256.js"><link rel="prefetch" href="/Myblog/assets/js/167.f4adbd3c.js"><link rel="prefetch" href="/Myblog/assets/js/168.240ee569.js"><link rel="prefetch" href="/Myblog/assets/js/169.78ac76cc.js"><link rel="prefetch" href="/Myblog/assets/js/17.f80adb5b.js"><link rel="prefetch" href="/Myblog/assets/js/170.383b3c21.js"><link rel="prefetch" href="/Myblog/assets/js/171.2c35a8cf.js"><link rel="prefetch" href="/Myblog/assets/js/172.a6debf57.js"><link rel="prefetch" href="/Myblog/assets/js/173.66afdcec.js"><link rel="prefetch" href="/Myblog/assets/js/174.362257d0.js"><link rel="prefetch" href="/Myblog/assets/js/175.77f36b02.js"><link rel="prefetch" href="/Myblog/assets/js/176.6a78adb7.js"><link rel="prefetch" href="/Myblog/assets/js/177.a2dfe65f.js"><link rel="prefetch" href="/Myblog/assets/js/178.67c3195c.js"><link rel="prefetch" href="/Myblog/assets/js/179.8fbf6ad5.js"><link rel="prefetch" href="/Myblog/assets/js/18.1f139833.js"><link rel="prefetch" href="/Myblog/assets/js/180.2d2a5eeb.js"><link rel="prefetch" href="/Myblog/assets/js/181.3091fe9a.js"><link rel="prefetch" href="/Myblog/assets/js/182.4812e427.js"><link rel="prefetch" href="/Myblog/assets/js/183.aa3147e4.js"><link rel="prefetch" href="/Myblog/assets/js/184.8d32f7e4.js"><link rel="prefetch" href="/Myblog/assets/js/185.e13a8b6d.js"><link rel="prefetch" href="/Myblog/assets/js/186.f1db47cd.js"><link rel="prefetch" href="/Myblog/assets/js/187.d43b1d81.js"><link rel="prefetch" href="/Myblog/assets/js/188.4916c444.js"><link rel="prefetch" href="/Myblog/assets/js/189.3e4ebca1.js"><link rel="prefetch" href="/Myblog/assets/js/19.9aa3d028.js"><link rel="prefetch" href="/Myblog/assets/js/190.71dca9a1.js"><link rel="prefetch" href="/Myblog/assets/js/191.a190e90e.js"><link rel="prefetch" href="/Myblog/assets/js/192.aca4dd44.js"><link rel="prefetch" href="/Myblog/assets/js/193.bad987cb.js"><link rel="prefetch" href="/Myblog/assets/js/194.e9746004.js"><link rel="prefetch" href="/Myblog/assets/js/195.3607edf3.js"><link rel="prefetch" href="/Myblog/assets/js/196.93445710.js"><link rel="prefetch" href="/Myblog/assets/js/197.4cce06bd.js"><link rel="prefetch" href="/Myblog/assets/js/198.42cb67c7.js"><link rel="prefetch" href="/Myblog/assets/js/199.180cb672.js"><link rel="prefetch" href="/Myblog/assets/js/20.471091aa.js"><link rel="prefetch" href="/Myblog/assets/js/200.5635058a.js"><link rel="prefetch" href="/Myblog/assets/js/201.cd072050.js"><link rel="prefetch" href="/Myblog/assets/js/202.f315fe07.js"><link rel="prefetch" href="/Myblog/assets/js/203.e4d54e8c.js"><link rel="prefetch" href="/Myblog/assets/js/204.def34858.js"><link rel="prefetch" href="/Myblog/assets/js/205.d24a4723.js"><link rel="prefetch" href="/Myblog/assets/js/206.eda5b460.js"><link rel="prefetch" href="/Myblog/assets/js/207.7a243319.js"><link rel="prefetch" href="/Myblog/assets/js/208.4bdf7c0d.js"><link rel="prefetch" href="/Myblog/assets/js/209.ce27506d.js"><link rel="prefetch" href="/Myblog/assets/js/21.674212a4.js"><link rel="prefetch" href="/Myblog/assets/js/210.eb88af70.js"><link rel="prefetch" href="/Myblog/assets/js/211.88469ea2.js"><link rel="prefetch" href="/Myblog/assets/js/212.8607aa06.js"><link rel="prefetch" href="/Myblog/assets/js/213.09d5002d.js"><link rel="prefetch" href="/Myblog/assets/js/214.872347f8.js"><link rel="prefetch" href="/Myblog/assets/js/215.1919832a.js"><link rel="prefetch" href="/Myblog/assets/js/216.69f62302.js"><link rel="prefetch" href="/Myblog/assets/js/217.918bac5f.js"><link rel="prefetch" href="/Myblog/assets/js/218.ea985588.js"><link rel="prefetch" href="/Myblog/assets/js/219.bda47b24.js"><link rel="prefetch" href="/Myblog/assets/js/22.850788bd.js"><link rel="prefetch" href="/Myblog/assets/js/220.30ae1aba.js"><link rel="prefetch" href="/Myblog/assets/js/221.76784208.js"><link rel="prefetch" href="/Myblog/assets/js/222.f7db7a76.js"><link rel="prefetch" href="/Myblog/assets/js/223.a9266e47.js"><link rel="prefetch" href="/Myblog/assets/js/224.89ed6e9a.js"><link rel="prefetch" href="/Myblog/assets/js/225.dd6a0787.js"><link rel="prefetch" href="/Myblog/assets/js/226.a8b10501.js"><link rel="prefetch" href="/Myblog/assets/js/227.92dcc403.js"><link rel="prefetch" href="/Myblog/assets/js/228.1446fbc6.js"><link rel="prefetch" href="/Myblog/assets/js/229.10c2d0fe.js"><link rel="prefetch" href="/Myblog/assets/js/23.2d4ff103.js"><link rel="prefetch" href="/Myblog/assets/js/230.c240e5d2.js"><link rel="prefetch" href="/Myblog/assets/js/231.27fb1dd4.js"><link rel="prefetch" href="/Myblog/assets/js/232.3bf66ad5.js"><link rel="prefetch" href="/Myblog/assets/js/233.80dbe1c1.js"><link rel="prefetch" href="/Myblog/assets/js/234.9ed9e2c7.js"><link rel="prefetch" href="/Myblog/assets/js/235.864d865d.js"><link rel="prefetch" href="/Myblog/assets/js/236.cfb4648b.js"><link rel="prefetch" href="/Myblog/assets/js/237.54341657.js"><link rel="prefetch" href="/Myblog/assets/js/238.021ac2dd.js"><link rel="prefetch" href="/Myblog/assets/js/239.1e4f5601.js"><link rel="prefetch" href="/Myblog/assets/js/24.c75d0f58.js"><link rel="prefetch" href="/Myblog/assets/js/240.ec4a535b.js"><link rel="prefetch" href="/Myblog/assets/js/241.e9d50e16.js"><link rel="prefetch" href="/Myblog/assets/js/242.1bc91766.js"><link rel="prefetch" href="/Myblog/assets/js/243.5e45384d.js"><link rel="prefetch" href="/Myblog/assets/js/244.abac28e2.js"><link rel="prefetch" href="/Myblog/assets/js/245.fd172477.js"><link rel="prefetch" href="/Myblog/assets/js/246.dc5737e0.js"><link rel="prefetch" href="/Myblog/assets/js/247.0bc86aad.js"><link rel="prefetch" href="/Myblog/assets/js/248.7863cd86.js"><link rel="prefetch" href="/Myblog/assets/js/249.6b1f9b18.js"><link rel="prefetch" href="/Myblog/assets/js/25.0a66dc19.js"><link rel="prefetch" href="/Myblog/assets/js/250.d23a4510.js"><link rel="prefetch" href="/Myblog/assets/js/251.044d4fa4.js"><link rel="prefetch" href="/Myblog/assets/js/252.7c059f14.js"><link rel="prefetch" href="/Myblog/assets/js/253.3bd60ac4.js"><link rel="prefetch" href="/Myblog/assets/js/254.c0cf064f.js"><link rel="prefetch" href="/Myblog/assets/js/255.e29147e7.js"><link rel="prefetch" href="/Myblog/assets/js/256.4cdb61c8.js"><link rel="prefetch" href="/Myblog/assets/js/257.84b9b225.js"><link rel="prefetch" href="/Myblog/assets/js/258.a0e27843.js"><link rel="prefetch" href="/Myblog/assets/js/259.9b185807.js"><link rel="prefetch" href="/Myblog/assets/js/26.1e567fb4.js"><link rel="prefetch" href="/Myblog/assets/js/260.480edcf7.js"><link rel="prefetch" href="/Myblog/assets/js/261.7ddf79b9.js"><link rel="prefetch" href="/Myblog/assets/js/262.b48154e3.js"><link rel="prefetch" href="/Myblog/assets/js/263.4810e576.js"><link rel="prefetch" href="/Myblog/assets/js/264.0dfa081e.js"><link rel="prefetch" href="/Myblog/assets/js/265.48b6832d.js"><link rel="prefetch" href="/Myblog/assets/js/266.f129d0f4.js"><link rel="prefetch" href="/Myblog/assets/js/267.6c5d3774.js"><link rel="prefetch" href="/Myblog/assets/js/268.eb0f9b3e.js"><link rel="prefetch" href="/Myblog/assets/js/269.925cc993.js"><link rel="prefetch" href="/Myblog/assets/js/27.c1d61996.js"><link rel="prefetch" href="/Myblog/assets/js/270.68b0bd2b.js"><link rel="prefetch" href="/Myblog/assets/js/271.8502aa5a.js"><link rel="prefetch" href="/Myblog/assets/js/272.8c1d08d3.js"><link rel="prefetch" href="/Myblog/assets/js/273.87fef5b5.js"><link rel="prefetch" href="/Myblog/assets/js/274.804886b8.js"><link rel="prefetch" href="/Myblog/assets/js/275.fcc21962.js"><link rel="prefetch" href="/Myblog/assets/js/276.3f763b44.js"><link rel="prefetch" href="/Myblog/assets/js/277.390d1a50.js"><link rel="prefetch" href="/Myblog/assets/js/278.26a4e0b6.js"><link rel="prefetch" href="/Myblog/assets/js/279.7acec3c7.js"><link rel="prefetch" href="/Myblog/assets/js/28.e6c3d1ba.js"><link rel="prefetch" href="/Myblog/assets/js/280.b8786056.js"><link rel="prefetch" href="/Myblog/assets/js/281.e8b8f6a8.js"><link rel="prefetch" href="/Myblog/assets/js/282.4644a652.js"><link rel="prefetch" href="/Myblog/assets/js/283.ee082dbd.js"><link rel="prefetch" href="/Myblog/assets/js/284.d293fb9f.js"><link rel="prefetch" href="/Myblog/assets/js/285.0bd000b4.js"><link rel="prefetch" href="/Myblog/assets/js/286.d7d2a5e8.js"><link rel="prefetch" href="/Myblog/assets/js/3.e9b78aa4.js"><link rel="prefetch" href="/Myblog/assets/js/30.55025986.js"><link rel="prefetch" href="/Myblog/assets/js/31.bd2c09a7.js"><link rel="prefetch" href="/Myblog/assets/js/32.b21b4390.js"><link rel="prefetch" href="/Myblog/assets/js/33.48b35fe3.js"><link rel="prefetch" href="/Myblog/assets/js/34.5a2c9911.js"><link rel="prefetch" href="/Myblog/assets/js/35.5886915b.js"><link rel="prefetch" href="/Myblog/assets/js/36.bc0d101c.js"><link rel="prefetch" href="/Myblog/assets/js/37.3ffa6f5b.js"><link rel="prefetch" href="/Myblog/assets/js/38.b84af47a.js"><link rel="prefetch" href="/Myblog/assets/js/39.27e133a3.js"><link rel="prefetch" href="/Myblog/assets/js/4.601d7474.js"><link rel="prefetch" href="/Myblog/assets/js/40.f9bd6136.js"><link rel="prefetch" href="/Myblog/assets/js/41.cbb70e36.js"><link rel="prefetch" href="/Myblog/assets/js/42.8c6f41ee.js"><link rel="prefetch" href="/Myblog/assets/js/43.9f2e0d9a.js"><link rel="prefetch" href="/Myblog/assets/js/44.67f63875.js"><link rel="prefetch" href="/Myblog/assets/js/45.39576bdd.js"><link rel="prefetch" href="/Myblog/assets/js/46.820c2006.js"><link rel="prefetch" href="/Myblog/assets/js/47.de5584ca.js"><link rel="prefetch" href="/Myblog/assets/js/48.24979779.js"><link rel="prefetch" href="/Myblog/assets/js/49.24d3cf4f.js"><link rel="prefetch" href="/Myblog/assets/js/5.75cad4d1.js"><link rel="prefetch" href="/Myblog/assets/js/50.ffe79fce.js"><link rel="prefetch" href="/Myblog/assets/js/51.55798962.js"><link rel="prefetch" href="/Myblog/assets/js/52.ae516416.js"><link rel="prefetch" href="/Myblog/assets/js/53.a3b65913.js"><link rel="prefetch" href="/Myblog/assets/js/54.3ba075b1.js"><link rel="prefetch" href="/Myblog/assets/js/55.7a067b9f.js"><link rel="prefetch" href="/Myblog/assets/js/56.9d9373b5.js"><link rel="prefetch" href="/Myblog/assets/js/57.22a067f0.js"><link rel="prefetch" href="/Myblog/assets/js/58.3154446d.js"><link rel="prefetch" href="/Myblog/assets/js/59.76c81511.js"><link rel="prefetch" href="/Myblog/assets/js/6.617e2a13.js"><link rel="prefetch" href="/Myblog/assets/js/60.65e7df7c.js"><link rel="prefetch" href="/Myblog/assets/js/61.3ec05fab.js"><link rel="prefetch" href="/Myblog/assets/js/62.e218f08a.js"><link rel="prefetch" href="/Myblog/assets/js/63.d4da616e.js"><link rel="prefetch" href="/Myblog/assets/js/64.3fe06f7e.js"><link rel="prefetch" href="/Myblog/assets/js/65.58a4e86d.js"><link rel="prefetch" href="/Myblog/assets/js/66.66f626a1.js"><link rel="prefetch" href="/Myblog/assets/js/67.75c52187.js"><link rel="prefetch" href="/Myblog/assets/js/68.1b108e76.js"><link rel="prefetch" href="/Myblog/assets/js/69.0f804fa1.js"><link rel="prefetch" href="/Myblog/assets/js/7.49e3e0b6.js"><link rel="prefetch" href="/Myblog/assets/js/70.664e2712.js"><link rel="prefetch" href="/Myblog/assets/js/71.fa67ddab.js"><link rel="prefetch" href="/Myblog/assets/js/72.70e68cb0.js"><link rel="prefetch" href="/Myblog/assets/js/73.5baea2fa.js"><link rel="prefetch" href="/Myblog/assets/js/74.59272e2c.js"><link rel="prefetch" href="/Myblog/assets/js/75.7f895c5c.js"><link rel="prefetch" href="/Myblog/assets/js/76.bacc73cf.js"><link rel="prefetch" href="/Myblog/assets/js/77.e6a9fcb7.js"><link rel="prefetch" href="/Myblog/assets/js/78.23139d5b.js"><link rel="prefetch" href="/Myblog/assets/js/79.732b7dc8.js"><link rel="prefetch" href="/Myblog/assets/js/8.c46078ca.js"><link rel="prefetch" href="/Myblog/assets/js/80.b6d944df.js"><link rel="prefetch" href="/Myblog/assets/js/81.29b2b54b.js"><link rel="prefetch" href="/Myblog/assets/js/82.0ea597b4.js"><link rel="prefetch" href="/Myblog/assets/js/83.63b324a8.js"><link rel="prefetch" href="/Myblog/assets/js/84.5c47f754.js"><link rel="prefetch" href="/Myblog/assets/js/85.74322b97.js"><link rel="prefetch" href="/Myblog/assets/js/86.3c64c1dd.js"><link rel="prefetch" href="/Myblog/assets/js/87.844516c9.js"><link rel="prefetch" href="/Myblog/assets/js/88.7de70651.js"><link rel="prefetch" href="/Myblog/assets/js/89.005fb164.js"><link rel="prefetch" href="/Myblog/assets/js/9.abd96dc3.js"><link rel="prefetch" href="/Myblog/assets/js/90.acae143f.js"><link rel="prefetch" href="/Myblog/assets/js/91.934b39ba.js"><link rel="prefetch" href="/Myblog/assets/js/92.964f6bf1.js"><link rel="prefetch" href="/Myblog/assets/js/93.58aeafa5.js"><link rel="prefetch" href="/Myblog/assets/js/94.f884efc8.js"><link rel="prefetch" href="/Myblog/assets/js/95.39dbb10e.js"><link rel="prefetch" href="/Myblog/assets/js/96.e6425d5c.js"><link rel="prefetch" href="/Myblog/assets/js/97.6be66846.js"><link rel="prefetch" href="/Myblog/assets/js/98.a0632e74.js"><link rel="prefetch" href="/Myblog/assets/js/99.ad988b64.js">
    <link rel="stylesheet" href="/Myblog/assets/css/0.styles.baca3271.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Myblog/" class="home-link router-link-active"><!----> <span class="site-name">麦仁博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Myblog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/Myblog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>javaScript笔记精选</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Myblog/pages/03dd97/" class="nav-link">JS常用案例</a></li></ul></li><li class="dropdown-item"><h4>vue学习精选</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Myblog/pages/0082e9/" class="nav-link">《vue基本知识点》</a></li><li class="dropdown-subitem"><a href="/Myblog/pages/24e9bb/" class="nav-link">《vue3的使用》</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/Myblog/backEnd/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Myblog/englishLife/" class="nav-link">英语</a></div><div class="nav-item"><a href="/Myblog/bookLife/" class="nav-link">读书</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/Myblog/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/Myblog/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/Myblog/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/Myblog/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/Myblog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/Myblog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/Myblog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/Myblog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/Myblog/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/Myblog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/Myblog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>javaScript笔记精选</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Myblog/pages/03dd97/" class="nav-link">JS常用案例</a></li></ul></li><li class="dropdown-item"><h4>vue学习精选</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Myblog/pages/0082e9/" class="nav-link">《vue基本知识点》</a></li><li class="dropdown-subitem"><a href="/Myblog/pages/24e9bb/" class="nav-link">《vue3的使用》</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/Myblog/backEnd/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Myblog/englishLife/" class="nav-link">英语</a></div><div class="nav-item"><a href="/Myblog/bookLife/" class="nav-link">读书</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/Myblog/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/Myblog/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/Myblog/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/Myblog/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/Myblog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/Myblog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/Myblog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/Myblog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/Myblog/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>python大纲</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Python学习</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Python基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>函数</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>模块化</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Myblog/pages/9264de/" class="sidebar-link">自定义模块</a></li><li><a href="/Myblog/pages/904412/" aria-current="page" class="active sidebar-link">内置模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/Myblog/pages/904412/#序列化模块" class="sidebar-link">序列化模块</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/904412/#os模块" class="sidebar-link">os模块</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/904412/#sys模块" class="sidebar-link">sys模块</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/904412/#hashlib模块" class="sidebar-link">hashlib模块</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/904412/#collections模块" class="sidebar-link">collections模块</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/904412/#时间相关模块" class="sidebar-link">时间相关模块</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/904412/#logging模块" class="sidebar-link">logging模块</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/904412/#random模块" class="sidebar-link">random模块</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/904412/#sys模块-2" class="sidebar-link">sys模块</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/904412/#re模块" class="sidebar-link">re模块</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/904412/#shutil模块" class="sidebar-link">shutil模块</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/904412/#xml模板" class="sidebar-link">xml模板</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/904412/#subprocess" class="sidebar-link">subprocess</a></li></ul></li><li><a href="/Myblog/pages/c03c2d/" class="sidebar-link">包</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>面向对象编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>并发编程</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mysql</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/Myblog/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/Myblog/backEnd/#后端" data-v-06225672>后端</a></li><li data-v-06225672><a href="/Myblog/backEnd/#Python学习" data-v-06225672>Python学习</a></li><li data-v-06225672><a href="/Myblog/backEnd/#模块化" data-v-06225672>模块化</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>Riverside Joy</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2024-06-03</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">内置模块<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="序列化模块"><a href="#序列化模块" class="header-anchor">#</a> 序列化模块</h2> <h3 id="为什么要有序列化模块"><a href="#为什么要有序列化模块" class="header-anchor">#</a> 为什么要有序列化模块</h3> <p>将这个数据结构转化成这个特殊的序列有什么用呢？ 这个才是序列化的关键所在，这个特殊的序列大有用处。举例说明：</p> <p>比如，你的程序中需要一个字典类型的数据存放你的个人信息：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code> dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'username'</span><span class="token punctuation">:</span><span class="token string">'太白'</span><span class="token punctuation">,</span> <span class="token string">'password'</span><span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">,</span><span class="token string">'login_status'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>你的程序中有一些地方都需要使用这个dic数据，登录时会用到，注册时也会用到。那么我们之前就是将这个dic写在全局里，但是这样是不合理的，应该是将这数据写入一个地方存储（还没有学数据库）先存放在一个文件中，那么程序中哪里需要这个数据了，你就读取文件取出你需要的信息即可。<strong>那么有没有什么问题？</strong> 你将这个字典直接写入文件是不可以的，必须转化成字符串的形式，而且你读取出来也是字符串形式的字典（可以用代码展示）。</p> <p>那么你拿到一个str(dic)有什么用？他是根本转化不成dic的（不能用eval很危险），所以很不方便。那么这时候序列化模块就起到作用了，如果你写入文件中的字符串是一个序列化后的特殊的字符串，那么当你从文件中读取出来，是可以转化回原数据结构的。这个就很牛逼了。</p> <p>下面说的是json序列化，pickle序列化有所不同。</p> <p>json序列化除了可以解决写入文件的问题，还可以解决网络传输的问题，比如你将一个list数据结构通过网络传给另个开发者，那么你不可以直接传输，之前我们说过，你要想传输出去必须用bytes类型。但是bytes类型只能与字符串类型互相转化，它不能与其他数据结构直接转化，所以，你只能将list ---&gt; 字符串 ---&gt; bytes 然后发送，对方收到之后，在decode() 解码成原字符串。此时这个字符串不能是我们之前学过的str那种字符串，因为它不能反解，必须要是这个特殊的字符串，他可以反解成list 这样开发者之间就可以借助网络互传数据了，不仅仅是开发者之间，你要借助网络爬取数据这些数据多半是这种特殊的字符串，你接受到之后，在反解成你需要的数据类型。</p> <p>对于这个序列化模块我们做一个小小总结：</p> <p>序列化模块就是将一个常见的数据结构转化成一个特殊的序列，并且这个特殊的序列还可以反解回去。它的主要用途：文件读写数据，网络传输数据。</p> <p>Python中这种序列化模块有三种：</p> <p>json模块 ： （<strong>重点</strong>）</p> <ol><li>不同语言都遵循的一种数据转化格式，即不同语言都使用的特殊字符串。（比如Python的一个列表[1, 2, 3]利用json转化成特殊的字符串，然后在编码成bytes发送给php的开发者，php的开发者就可以解码成特殊的字符串，然后在反解成原数组(列表): [1, 2, 3]）</li> <li>json序列化只支持部分Python数据结构：dict,list, tuple,str,int, float,True,False,None</li></ol> <p>pickle模块：</p> <ol><li>只能是Python语言遵循的一种数据转化格式，只能在python语言中使用。</li> <li>支持Python所有的数据类型包括实例化对象。</li></ol> <p>shelve模块：类似于字典的操作方式去操作特殊的字符串（不讲，可以课下了解）。</p> <p><strong>当然序列化模块中使用最多的的就是json模块，那么接下来，我们讲一下json与pickle模块</strong></p> <h3 id="json模块"><a href="#json模块" class="header-anchor">#</a> json模块</h3> <p><strong>json模块是将满足条件的数据结构转化成特殊的字符串，并且也可以反序列化还原回去。</strong></p> <p>上面介绍我已经说过了，序列化模块总共只有两种用法，要不就是用于网络传输的中间环节，要不就是文件存储的中间环节，所以json模块总共就有两对四个方法：</p> <p><strong>用于网络传输：dumps、loads</strong></p> <p><strong>用于文件写读：dump、load</strong></p> <h4 id="dumps、loads"><a href="#dumps、loads" class="header-anchor">#</a> dumps、loads</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> json
dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'k1'</span><span class="token punctuation">:</span><span class="token string">'v1'</span><span class="token punctuation">,</span><span class="token string">'k2'</span><span class="token punctuation">:</span><span class="token string">'v2'</span><span class="token punctuation">,</span><span class="token string">'k3'</span><span class="token punctuation">:</span><span class="token string">'v3'</span><span class="token punctuation">}</span>
str_dic <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>dic<span class="token punctuation">)</span>  <span class="token comment">#序列化：将一个字典转换成一个字符串</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>str_dic<span class="token punctuation">)</span><span class="token punctuation">,</span>str_dic<span class="token punctuation">)</span>  <span class="token comment">#&lt;class 'str'&gt; {&quot;k3&quot;: &quot;v3&quot;, &quot;k1&quot;: &quot;v1&quot;, &quot;k2&quot;: &quot;v2&quot;}</span>
<span class="token comment">#注意，json转换完的字符串类型的字典中的字符串是由&quot;&quot;表示的</span>

dic2 <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>str_dic<span class="token punctuation">)</span>  <span class="token comment">#反序列化：将一个字符串格式的字典转换成一个字典</span>
<span class="token comment">#注意，要用json的loads功能处理的字符串类型的字典中的字符串必须由&quot;&quot;表示</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>dic2<span class="token punctuation">)</span><span class="token punctuation">,</span>dic2<span class="token punctuation">)</span>  <span class="token comment">#&lt;class 'dict'&gt; {'k1': 'v1', 'k2': 'v2', 'k3': 'v3'}</span>


list_dic <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">'k1'</span><span class="token punctuation">:</span><span class="token string">'v1'</span><span class="token punctuation">,</span><span class="token string">'k2'</span><span class="token punctuation">:</span><span class="token string">'v2'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
str_dic <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>list_dic<span class="token punctuation">)</span> <span class="token comment">#也可以处理嵌套的数据类型 </span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>str_dic<span class="token punctuation">)</span><span class="token punctuation">,</span>str_dic<span class="token punctuation">)</span> <span class="token comment">#&lt;class 'str'&gt; [1, [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;], 3, {&quot;k1&quot;: &quot;v1&quot;, &quot;k2&quot;: &quot;v2&quot;}]</span>
list_dic2 <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>str_dic<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>list_dic2<span class="token punctuation">)</span><span class="token punctuation">,</span>list_dic2<span class="token punctuation">)</span> <span class="token comment">#&lt;class 'list'&gt; [1, ['a', 'b', 'c'], 3, {'k1': 'v1', 'k2': 'v2'}]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="dump、load"><a href="#dump、load" class="header-anchor">#</a> dump、load</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> json
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'json_file.json'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">)</span>
dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'k1'</span><span class="token punctuation">:</span><span class="token string">'v1'</span><span class="token punctuation">,</span><span class="token string">'k2'</span><span class="token punctuation">:</span><span class="token string">'v2'</span><span class="token punctuation">,</span><span class="token string">'k3'</span><span class="token punctuation">:</span><span class="token string">'v3'</span><span class="token punctuation">}</span>
json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>dic<span class="token punctuation">,</span>f<span class="token punctuation">)</span>  <span class="token comment">#dump方法接收一个文件句柄，直接将字典转换成json字符串写入文件</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># json文件也是文件，就是专门存储json字符串的文件。</span>
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'json_file.json'</span><span class="token punctuation">)</span>
dic2 <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span>f<span class="token punctuation">)</span>  <span class="token comment">#load方法接收一个文件句柄，直接将文件中的json字符串转换成数据结构返回</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>dic2<span class="token punctuation">)</span><span class="token punctuation">,</span>dic2<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="其他参数说明"><a href="#其他参数说明" class="header-anchor">#</a> 其他参数说明</h4> <p>ensure_ascii:，当它为True的时候，所有非ASCII码字符显示为\uXXXX序列，只需在dump时将ensure_ascii设置为False即可，此时存入json的中文即可正常显示。 separators：分隔符，实际上是(item_separator, dict_separator)的一个元组，默认的就是(‘,’,’:’)；这表示dictionary内keys之间用“,”隔开，而KEY和value之间用“：”隔开。 sort_keys：将数据根据keys的值进行排序。 剩下的自己看源码研究</p> <h4 id="json序列化存储多个数据到同一个文件中"><a href="#json序列化存储多个数据到同一个文件中" class="header-anchor">#</a> json序列化存储多个数据到同一个文件中</h4> <p>对于json序列化，存储多个数据到一个文件中是有问题的，默认一个json文件只能存储一个json数据，但是也可以解决，举例说明：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>对于json 存储多个数据到文件中
dic1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'oldboy1'</span><span class="token punctuation">}</span>
dic2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'oldboy2'</span><span class="token punctuation">}</span>
dic3 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'oldboy3'</span><span class="token punctuation">}</span>
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'序列化'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">)</span>
json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>dic1<span class="token punctuation">,</span>f<span class="token punctuation">)</span>
json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>dic2<span class="token punctuation">,</span>f<span class="token punctuation">)</span>
json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>dic3<span class="token punctuation">,</span>f<span class="token punctuation">)</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'序列化'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
ret <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
ret1 <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
ret2 <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>上面会报错，解决方案：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>dic1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'oldboy1'</span><span class="token punctuation">}</span>
dic2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'oldboy2'</span><span class="token punctuation">}</span>
dic3 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'oldboy3'</span><span class="token punctuation">}</span>
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'序列化'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">)</span>
str1 <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>dic1<span class="token punctuation">)</span>
f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>str1<span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
str2 <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>dic2<span class="token punctuation">)</span>
f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>str2<span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
str3 <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>dic3<span class="token punctuation">)</span>
f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>str3<span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'序列化'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="pickle模块"><a href="#pickle模块" class="header-anchor">#</a> pickle模块</h3> <p><strong>pickle模块是将Python所有的数据结构以及对象等转化成bytes类型，然后还可以反序列化还原回去。</strong></p> <p>刚才也跟大家提到了pickle模块，pickle模块是只能Python语言识别的序列化模块。如果把序列化模块比喻成全世界公认的一种交流语言，也就是标准的话，json就是像是英语，全世界（python，java，php，C，等等）都遵循这个标准。而pickle就是中文，只有中国人（python）作为第一交流语言。</p> <p>既然只是Python语言使用，那么它支持Python所有的数据类型包括后面我们要讲的实例化对象等，它能将这些所有的数据结构序列化成特殊的bytes，然后还可以反序列化还原。使用上与json几乎差不多，也是两对四个方法。</p> <p><strong>用于网络传输：dumps、loads</strong></p> <p><strong>用于文件写读：dump、load</strong></p> <h4 id="dumps、loads-2"><a href="#dumps、loads-2" class="header-anchor">#</a> dumps、loads</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> pickle
dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'k1'</span><span class="token punctuation">:</span><span class="token string">'v1'</span><span class="token punctuation">,</span><span class="token string">'k2'</span><span class="token punctuation">:</span><span class="token string">'v2'</span><span class="token punctuation">,</span><span class="token string">'k3'</span><span class="token punctuation">:</span><span class="token string">'v3'</span><span class="token punctuation">}</span>
str_dic <span class="token operator">=</span> pickle<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>dic<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>str_dic<span class="token punctuation">)</span>  <span class="token comment"># bytes类型</span>

dic2 <span class="token operator">=</span> pickle<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>str_dic<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>dic2<span class="token punctuation">)</span>    <span class="token comment">#字典</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 还可以序列化对象</span>
<span class="token keyword">import</span> pickle

<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span>
    
ret <span class="token operator">=</span> pickle<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>func<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">,</span><span class="token builtin">type</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># b'\x80\x03c__main__\nfunc\nq\x00.' &lt;class 'bytes'&gt;</span>

f1 <span class="token operator">=</span> pickle<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>ret<span class="token punctuation">)</span>  <span class="token comment"># f1得到 func函数的内存地址</span>
f1<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 执行func函数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="dump、load-2"><a href="#dump、load-2" class="header-anchor">#</a> dump、load</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>dic <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token string">'oldboy'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token boolean">True</span><span class="token punctuation">,</span><span class="token string">'set'</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'pick序列化'</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">'wb'</span><span class="token punctuation">)</span>
pickle<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>dic<span class="token punctuation">,</span>f<span class="token punctuation">)</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'pick序列化'</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f1<span class="token punctuation">:</span>
    pickle<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>dic<span class="token punctuation">,</span>f1<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="pickle序列化存储多个数据到一个文件中"><a href="#pickle序列化存储多个数据到一个文件中" class="header-anchor">#</a> pickle序列化存储多个数据到一个文件中</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code>dic1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'oldboy1'</span><span class="token punctuation">}</span>
dic2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'oldboy2'</span><span class="token punctuation">}</span>
dic3 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'oldboy3'</span><span class="token punctuation">}</span>
​
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'pick多数据'</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">'wb'</span><span class="token punctuation">)</span>
pickle<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>dic1<span class="token punctuation">,</span>f<span class="token punctuation">)</span>
pickle<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>dic2<span class="token punctuation">,</span>f<span class="token punctuation">)</span>
pickle<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>dic3<span class="token punctuation">,</span>f<span class="token punctuation">)</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
​
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'pick多数据'</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">'rb'</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>pickle<span class="token punctuation">.</span>load<span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> EOFError<span class="token punctuation">:</span>
        <span class="token keyword">break</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>既然pickle如此强大，为什么还要学json呢？这里我们要说明一下，json是一种所有的语言都可以识别的数据结构。如果我们将一个字典或者序列化成了一个json存在文件里，那么java代码或者js代码也可以拿来用。但是如果我们用pickle进行序列化，其他语言就不能读懂这是什么了～所以，如果你序列化的内容是列表或者字典，我们非常推荐你使用json模块，但如果出于某种原因你不得不序列化其他的数据类型，而未来你还会用python对这个数据进行反序列化的话，那么就可以使用pickle</p> <h3 id="shelve模块"><a href="#shelve模块" class="header-anchor">#</a> shelve模块</h3> <p>shelve也是python提供给我们的序列化工具，比pickle用起来更简单一些。
shelve只提供给我们一个open方法，是用key来访问的，使用起来和字典类似。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> shelve
f <span class="token operator">=</span> shelve<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'shelve_file'</span><span class="token punctuation">)</span>
f<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'int'</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'float'</span><span class="token punctuation">:</span><span class="token number">9.5</span><span class="token punctuation">,</span> <span class="token string">'string'</span><span class="token punctuation">:</span><span class="token string">'Sample data'</span><span class="token punctuation">}</span>  <span class="token comment">#直接对文件句柄操作，就可以存入数据</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> shelve
f1 <span class="token operator">=</span> shelve<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'shelve_file'</span><span class="token punctuation">)</span>
existing <span class="token operator">=</span> f1<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span>  <span class="token comment">#取出数据的时候也只需要直接用key获取即可，但是如果key不存在会报错</span>
f1<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>existing<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>这个模块有个限制，它不支持多个应用同一时间往同一个DB进行写操作。所以当我们知道我们的应用如果只进行读操作，我们可以让shelve通过只读方式打开DB</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> shelve
f <span class="token operator">=</span> shelve<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'shelve_file'</span><span class="token punctuation">,</span> flag<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">)</span>
existing <span class="token operator">=</span> f<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>existing<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>由于shelve在默认情况下是不会记录待持久化对象的任何修改的，所以我们在shelve.open()时候需要修改默认参数，否则对象的修改不会保存</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> shelve
f1 <span class="token operator">=</span> shelve<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'shelve_file'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>f1<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
f1<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'new_value'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'this was not here before'</span>
f1<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

f2 <span class="token operator">=</span> shelve<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'shelve_file'</span><span class="token punctuation">,</span> writeback<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>f2<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
f2<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'new_value'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'this was not here before'</span>
f2<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>writeback方式有优点也有缺点。优点是减少了我们出错的概率，并且让对象的持久化对用户更加的透明了；但这种方式并不是所有的情况下都需要，首先，使用writeback以后，shelf在open()的时候会增加额外的内存消耗，并且当DB在close()的时候会将缓存中的每一个对象都写入到DB，这也会带来额外的等待时间。因为shelve没有办法知道缓存中哪些对象修改了，哪些对象没有修改，因此所有的对象都会被写入。</p> <h2 id="os模块"><a href="#os模块" class="header-anchor">#</a> os模块</h2> <p>os模块是与操作系统交互的一个接口,它提供的功能多与工作目录，路径，文件等相关。接下来这些方法我会带着大家演示一遍，重点的一些方法最好记住，剩下的记好笔记，以后需要时随时查阅即可。</p> <p>讲这些方法前先给大家普及一下专用名词：</p> <p>目录指的是:文件夹 当前目录，工作目录，父级目录：指的都是一个，就是本文件所在的文件夹。</p> <p>接下来带着学生讲解下面的这些方法：<strong>按照星的等级划分,三颗星是需要记住的</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>当前执行这个python文件的工作目录相关的工作路径
os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span> 获取当前工作目录，即当前python脚本工作的目录路径  <span class="token operator">**</span> 
os<span class="token punctuation">.</span>chdir<span class="token punctuation">(</span><span class="token string">&quot;dirname&quot;</span><span class="token punctuation">)</span>  改变当前脚本工作目录；相当于shell下cd  <span class="token operator">**</span>
os<span class="token punctuation">.</span>curdir  返回当前目录<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>  <span class="token operator">**</span>
os<span class="token punctuation">.</span>pardir  获取当前目录的父目录字符串名：<span class="token punctuation">(</span><span class="token string">'..'</span><span class="token punctuation">)</span> <span class="token operator">**</span>

<span class="token comment"># 和文件夹相关 </span>
os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span><span class="token string">'dirname1/dirname2'</span><span class="token punctuation">)</span>    可生成多层递归目录  <span class="token operator">**</span><span class="token operator">*</span>
os<span class="token punctuation">.</span>removedirs<span class="token punctuation">(</span><span class="token string">'dirname1'</span><span class="token punctuation">)</span> 若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推 <span class="token operator">**</span><span class="token operator">*</span>
os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span><span class="token string">'dirname'</span><span class="token punctuation">)</span>    生成单级目录；相当于shell中mkdir dirname <span class="token operator">**</span><span class="token operator">*</span>
os<span class="token punctuation">.</span>rmdir<span class="token punctuation">(</span><span class="token string">'dirname'</span><span class="token punctuation">)</span>    删除单级空目录，若目录不为空则无法删除，报错；相当于shell中rmdir dirname <span class="token operator">**</span><span class="token operator">*</span>
<span class="token comment"># os.listdir('dirname')    列出指定目录下的所有文件和子目录，包括隐藏文件，并以列表方式打印 **</span>

<span class="token comment"># 和文件相关</span>
os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token punctuation">)</span>  删除一个文件  <span class="token operator">**</span><span class="token operator">*</span>
os<span class="token punctuation">.</span>rename<span class="token punctuation">(</span><span class="token string">&quot;oldname&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;newname&quot;</span><span class="token punctuation">)</span>  重命名文件<span class="token operator">/</span>目录  <span class="token operator">**</span><span class="token operator">*</span>
os<span class="token punctuation">.</span>stat<span class="token punctuation">(</span><span class="token string">'path/filename'</span><span class="token punctuation">)</span>  获取文件<span class="token operator">/</span>目录信息 <span class="token operator">**</span>

<span class="token comment"># 和操作系统差异相关</span>
<span class="token comment"># os.sep    输出操作系统特定的路径分隔符，win下为&quot;\\&quot;,Linux下为&quot;/&quot; *</span>
<span class="token comment"># os.linesep    输出当前平台使用的行终止符，win下为&quot;\t\n&quot;,Linux下为&quot;\n&quot; *</span>
<span class="token comment"># os.pathsep    输出用于分割文件路径的字符串 win下为;,Linux下为: *</span>
<span class="token comment"># os.name    输出字符串指示当前使用平台。win-&gt;'nt'; Linux-&gt;'posix' *</span>
<span class="token comment"># 和执行系统命令相关</span>
<span class="token comment"># os.system(&quot;bash command&quot;)  运行shell命令，直接显示  **</span>
<span class="token comment"># os.popen(&quot;bash command).read()  运行shell命令，获取执行结果  **</span>
os<span class="token punctuation">.</span>environ  获取系统环境变量  <span class="token operator">**</span>

<span class="token comment">#path系列，和路径相关</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>path<span class="token punctuation">)</span> 返回path规范化的绝对路径  <span class="token operator">**</span><span class="token operator">*</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>split<span class="token punctuation">(</span>path<span class="token punctuation">)</span> 将path分割成目录和文件名二元组返回 <span class="token operator">**</span><span class="token operator">*</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>path<span class="token punctuation">)</span> 返回path的目录。其实就是os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>split<span class="token punctuation">(</span>path<span class="token punctuation">)</span>的第一个元素  <span class="token operator">**</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>basename<span class="token punctuation">(</span>path<span class="token punctuation">)</span> 返回path最后的文件名。如何path以／或\结尾，那么就会返回空值，即os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>split<span class="token punctuation">(</span>path<span class="token punctuation">)</span>的第二个元素。 <span class="token operator">**</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>path<span class="token punctuation">)</span>  如果path存在，返回<span class="token boolean">True</span>；如果path不存在，返回<span class="token boolean">False</span>  <span class="token operator">**</span><span class="token operator">*</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isabs<span class="token punctuation">(</span>path<span class="token punctuation">)</span>  如果path是绝对路径，返回<span class="token boolean">True</span>  <span class="token operator">**</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isfile<span class="token punctuation">(</span>path<span class="token punctuation">)</span>  如果path是一个存在的文件，返回<span class="token boolean">True</span>。否则返回<span class="token boolean">False</span>  <span class="token operator">**</span><span class="token operator">*</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>path<span class="token punctuation">)</span>  如果path是一个存在的目录，则返回<span class="token boolean">True</span>。否则返回<span class="token boolean">False</span>  <span class="token operator">**</span><span class="token operator">*</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>path1<span class="token punctuation">[</span><span class="token punctuation">,</span> path2<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  将多个路径组合后返回，第一个绝对路径之前的参数将被忽略 <span class="token operator">**</span><span class="token operator">*</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>getatime<span class="token punctuation">(</span>path<span class="token punctuation">)</span>  返回path所指向的文件或者目录的最后访问时间  <span class="token operator">**</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>getmtime<span class="token punctuation">(</span>path<span class="token punctuation">)</span>  返回path所指向的文件或者目录的最后修改时间  <span class="token operator">**</span>
os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>getsize<span class="token punctuation">(</span>path<span class="token punctuation">)</span> 返回path的大小 <span class="token operator">**</span><span class="token operator">*</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>注意：os.stat('path/filename') 获取文件/目录信息 的结构说明</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>stat 结构<span class="token punctuation">:</span>
st_mode<span class="token punctuation">:</span> inode 保护模式
st_ino<span class="token punctuation">:</span> inode 节点号。
st_dev<span class="token punctuation">:</span> inode 驻留的设备。
st_nlink<span class="token punctuation">:</span> inode 的链接数。
st_uid<span class="token punctuation">:</span> 所有者的用户ID。
st_gid<span class="token punctuation">:</span> 所有者的组ID。
st_size<span class="token punctuation">:</span> 普通文件以字节为单位的大小；包含等待某些特殊文件的数据。
st_atime<span class="token punctuation">:</span> 上次访问的时间。
st_mtime<span class="token punctuation">:</span> 最后一次修改的时间。
st_ctime<span class="token punctuation">:</span> 由操作系统报告的<span class="token string">&quot;ctime&quot;</span>。在某些系统上（如Unix）是最新的元数据更改的时间，在其它系统上（如Windows）是创建时间（详细信息参见平台的文档）。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="sys模块"><a href="#sys模块" class="header-anchor">#</a> sys模块</h2> <p>sys模块是与python解释器交互的一个接口，这个模块功能不是很多，练习一遍就行</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>sys<span class="token punctuation">.</span>argv           命令行参数List，第一个元素是程序本身路径
sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>n<span class="token punctuation">)</span>        退出程序，正常退出时exit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>错误退出sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
sys<span class="token punctuation">.</span>version        获取Python解释程序的版本信息
sys<span class="token punctuation">.</span>path           返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值  <span class="token operator">**</span><span class="token operator">*</span>
sys<span class="token punctuation">.</span>platform       返回操作系统平台名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="hashlib模块"><a href="#hashlib模块" class="header-anchor">#</a> hashlib模块</h2> <p>此模块有人称为摘要算法，也叫做加密算法，或者是哈希算法，散列算法等等，这么多title不用大家记，那么有同学就问他到底是干啥的？ 简单来说就是做加密和校验使用，它的工作原理给大家简单描述一下：它通过一个函数，把任意长度的数据按照一定规则转换为一个固定长度的数据串（通常用16进制的字符串表示）。</p> <p>比如：之前我们在一个文件中存储用户的用户名和密码是这样的形式：</p> <p>太白|123456</p> <p>有什么问题？你的密码是明文的，如果有人可以窃取到这个文件，那么你的密码就会泄露了。所以，一般我们存储密码时都是以密文存储，比如：</p> <p>太白|e10adc3949ba59abbe56e057f20f883e</p> <p>那么即使是他窃取到这个文件，他也不会轻易的破解出你的密码，这样就会保证了数据的安全。</p> <p>hashlib模块就可以完成的就是这个功能。</p> <p>hashlib的特征以及使用要点：</p> <ol><li>bytes类型数据 ---&gt; 通过hashlib算法 ---&gt; 固定长度的字符串</li> <li>不同的bytes类型数据转化成的结果一定不同。</li> <li>相同的bytes类型数据转化成的结果一定相同。</li> <li>此转化过程不可逆。</li></ol> <p>那么刚才我们也说了，hashlib的主要用途有两个：</p> <p><strong>密码的加密。</strong></p> <p><strong>文件一致性校验。</strong></p> <p>hashlib模块就相当于一个算法的集合，这里面包含着很多的算法，算法越高，转化成的结果越复杂，安全程度越高，相应的效率就会越低。</p> <h3 id="密码的加密"><a href="#密码的加密" class="header-anchor">#</a> 密码的加密</h3> <h4 id="普通加密"><a href="#普通加密" class="header-anchor">#</a> 普通加密</h4> <p>我们以常见的摘要算法MD5为例，计算出一个字符串的MD5值：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> hashlib

md5 <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token punctuation">)</span>
md5<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>md5<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 计算结果如下：</span>
<span class="token string">'e10adc3949ba59abbe56e057f20f883e'</span>

<span class="token comment"># 验证：相同的bytes数据转化的结果一定相同</span>
<span class="token keyword">import</span> hashlib

md5 <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token punctuation">)</span>
md5<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>md5<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 计算结果如下：</span>
<span class="token string">'e10adc3949ba59abbe56e057f20f883e'</span>

<span class="token comment"># 验证：不相同的bytes数据转化的结果一定不相同</span>
<span class="token keyword">import</span> hashlib

md5 <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token punctuation">)</span>
md5<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'12345'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>md5<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 计算结果如下：</span>
<span class="token string">'827ccb0eea8a706c4c34a16891f84e7b'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>上面就是普通的md5加密，非常简单，几行代码就可以了，但是这种加密级别是最低的，相对来说不很安全。虽然说hashlib加密是不可逆的加密方式，但也是可以破解的，那么他是如何做的呢？你看网上好多MD5解密软件，他们就是用最low的方式，空间换时间。他们会把常用的一些密码比如：123456,111111,以及他们的md5的值做成对应关系，类似于字典，</p> <p>dic = {'e10adc3949ba59abbe56e057f20f883e': 123456}</p> <p>然后通过你的密文获取对应的密码。</p> <p>只要空间足够大，那么里面容纳的密码会非常多，利用空间换取破解时间。 所以针对刚才说的情况，我们有更安全的加密方式：加盐。</p> <h4 id="加盐加密"><a href="#加盐加密" class="header-anchor">#</a> 加盐加密</h4> <h5 id="固定的盐"><a href="#固定的盐" class="header-anchor">#</a> 固定的盐</h5> <p>什么叫加盐？加盐这个词儿来自于国外，外国人起名字我认为很随意，这个名字来源于烧烤，俗称BBQ。我们烧烤的时候，一般在快熟的时候，都会给肉串上面撒盐，增加味道，那么这个撒盐的工序，外国人认为比较复杂，所以就讲比较复杂的加密方式称之为加盐。</p> <p>其实代码非常简单：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>ret <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token string">'xx教育'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># xx教育就是固定的盐</span>
ret<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面的xx教育就是固定的盐，比如你在一家公司，公司会将你们所有的密码在md5之前增加一个固定的盐，这样提高了密码的安全性。但是如果黑客通过手段窃取到你这个固定的盐之后，也是可以破解出来的。所以，我们还可以加动态的盐。</p> <h5 id="动态的盐"><a href="#动态的盐" class="header-anchor">#</a> 动态的盐</h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code>username <span class="token operator">=</span> <span class="token string">'太白金星666'</span>
ret <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span>username<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 针对于每个账户，每个账户的盐都不一样</span>
ret<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这样，安全性能就大大提高了。</p> <p>那么我们之前说了hahslib模块是一个算法集合，他里面包含很多种加密算法，刚才我们说的MD5算法是比较常用的一种加密算法，一般的企业用MD5就够用了。但是对安全要求比较高的企业，比如金融行业，MD5加密的方式就不够了，得需要加密方式更高的，比如sha系列，sha1,sha224,sha512等等，数字越大，加密的方法越复杂，安全性越高，但是效率就会越慢</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>ret <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>sha1<span class="token punctuation">(</span><span class="token punctuation">)</span>
ret<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'taibaijinxing'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">#也可加盐</span>
ret <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>sha384<span class="token punctuation">(</span><span class="token string">b'asfdsa'</span><span class="token punctuation">)</span>
ret<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'taibaijinxing'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 也可以加动态的盐</span>
ret <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>sha384<span class="token punctuation">(</span><span class="token string">b'asfdsa'</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ret<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'taibaijinxing'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>不过一般我们用到MD5加密就可以了</p> <h3 id="文件的一致性校验"><a href="#文件的一致性校验" class="header-anchor">#</a> 文件的一致性校验</h3> <p>hashlib模块除了可以用于密码加密之外，还有一个常用的功能，那就是文件的一致性校验。</p> <p>linux讲究：一切皆文件，我们普通的文件，是文件，视频，音频，图片，以及应用程序等都是文件。我们都从网上下载过资源，比如我们刚开学时让大家从网上下载pycharm这个软件，当时你可能没有注意过，其实你下载的时候都是带一个MD5或者shax值的，为什么？ 我们的网络世界是很不安全的，经常会遇到病毒，木马等，有些你是看不到的可能就植入了你的电脑中，那么他们是怎么来的？ 都是通过网络传入来的，就是你在网上下载一些资源的时候，趁虚而入，当然大部门被我们的浏览器或者杀毒软件拦截了，但是还有一部分偷偷的进入你的磁盘中了。那么我们自己如何验证我们下载的资源是否有病毒呢？这就需要文件的一致性校验了。在我们下载一个软件时，往往都带有一个MD5或者shax值，当我们下载完成这个应用程序时你要是对比大小根本看不出什么问题，你应该对比他们的md5值，如果两个md5值相同，就证明这个应用程序是安全的，如果你下载的这个文件的MD5值与服务端给你提供的不同，那么就证明你这个应用程序肯定是植入病毒了（文件损坏的几率很低），那么你就应该赶紧删除，不应该安装此应用程序。</p> <p>我们之前说过，md5计算的就是bytes类型的数据的转换值，同一个bytes数据用同样的加密方式转化成的结果一定相同，如果不同的bytes数据（即使一个数据只是删除了一个空格）那么用同样的加密方式转化成的结果一定是不同的。所以，hashlib也是验证文件一致性的重要工具。</p> <p>我将文件校验写在一个函数中</p> <p><strong>low版文件校验：</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f1<span class="token punctuation">:</span>
        ret <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token punctuation">)</span>
        ret<span class="token punctuation">.</span>update<span class="token punctuation">(</span>f1<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> ret<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>func<span class="token punctuation">(</span><span class="token string">'hashlib_file1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>这样就可以计算此文件的MD5值，从而进行文件校验。但是这样写有一个问题，类似我们文件的改的操作，有什么问题？如果文件过大，全部读取出来直接就会撑爆内存的，所以我们要分段读取，那么分段读取怎么做呢？</p> <p>hashlib还可以这样玩：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> hashlib
<span class="token comment"># 直接 update</span>
md5obj <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token punctuation">)</span>
md5obj<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'太白 is a old driver'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>md5obj<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 900e328fa53873fb245f418d6942e41b</span>


<span class="token comment"># 分段update</span>
md5obj <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token punctuation">)</span>
md5obj<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'太白 '</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
md5obj<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'is '</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
md5obj<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'a '</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
md5obj<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'old '</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
md5obj<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string">'driver'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>md5obj<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 900e328fa53873fb245f418d6942e41b</span>
<span class="token comment"># 结果相同</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>那么根据上面的代码，我们自己做一个高大上版的文件校验。</p> <p><strong>高大上版文件校验</strong></p> <p><strong>校验此版本的pycharm的sha256值是否相同。</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">file_check</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f1<span class="token punctuation">:</span>
        sha256 <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>sha256<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>
            content <span class="token operator">=</span> f1<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> content<span class="token punctuation">:</span>
                sha256<span class="token punctuation">.</span>update<span class="token punctuation">(</span>content<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> sha256<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>file_check<span class="token punctuation">(</span><span class="token string">'pycharm-professional-2019.1.1.exe'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="collections模块"><a href="#collections模块" class="header-anchor">#</a> collections模块</h2> <p>在内置数据类型（dict、list、set、tuple）的基础上，collections模块还提供了几个额外的数据类型：Counter、deque、defaultdict、namedtuple和OrderedDict等。</p> <p>1.namedtuple: 生成可以使用名字来访问元素内容的tuple</p> <p>2.deque: 双端队列，可以快速的从另外一侧追加和推出对象</p> <p>3.Counter: 计数器，主要用来计数</p> <p>4.OrderedDict: 有序字典</p> <p>5.defaultdict: 带有默认值的字典</p> <h3 id="namedtuple"><a href="#namedtuple" class="header-anchor">#</a> namedtuple</h3> <p>我们知道tuple可以表示不变集合，例如，一个点的二维坐标就可以表示成：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>但是，看到(1, 2)，很难看出这个tuple是用来表示一个坐标的。</p> <p>这时，namedtuple就派上了用场：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> collections <span class="token keyword">import</span> namedtuple
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Point <span class="token operator">=</span> namedtuple<span class="token punctuation">(</span><span class="token string">'Point'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p <span class="token operator">=</span> Point<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>x
<span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>y
<span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>类似的，如果要用坐标和半径表示一个圆，也可以用namedtuple定义：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>namedtuple<span class="token punctuation">(</span><span class="token string">'名称'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>属性<span class="token builtin">list</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
Circle <span class="token operator">=</span> namedtuple<span class="token punctuation">(</span><span class="token string">'Circle'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="deque"><a href="#deque" class="header-anchor">#</a> deque</h3> <p>使用list存储数据时，按索引访问元素很快，但是插入和删除元素就很慢了，因为list是线性存储，数据量大的时候，插入和删除效率很低。</p> <p>deque是为了高效实现插入和删除操作的双向列表，适合用于队列和栈：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> collections <span class="token keyword">import</span> deque
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> q <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> q<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> q<span class="token punctuation">.</span>appendleft<span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> q
deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>deque除了实现list的append()和pop()外，还支持appendleft()和popleft()，这样就可以非常高效地往头部添加或删除元素。</p> <h3 id="ordereddict"><a href="#ordereddict" class="header-anchor">#</a> OrderedDict</h3> <p>使用dict时，Key是无序的。在对dict做迭代时，我们无法确定Key的顺序。</p> <p>如果要保持Key的顺序，可以用OrderedDict：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> collections <span class="token keyword">import</span> OrderedDict
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d <span class="token comment"># dict的Key是无序的</span>
<span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od <span class="token operator">=</span> OrderedDict<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od <span class="token comment"># OrderedDict的Key是有序的</span>
OrderedDict<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>注意，OrderedDict的Key会按照插入的顺序排列，不是Key本身排序:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od <span class="token operator">=</span> OrderedDict<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od<span class="token punctuation">[</span><span class="token string">'z'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od<span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od<span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> od<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 按照插入的Key的顺序返回</span>
<span class="token punctuation">[</span><span class="token string">'z'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="defaultdict"><a href="#defaultdict" class="header-anchor">#</a> defaultdict</h3> <p>有如下值集合 [11,22,33,44,55,66,77,88,99,90...]，将所有大于 66 的值保存至字典的第一个key中，将小于 66 的值保存至第二个key的值中。</p> <p>即： {'k1': 大于66 , 'k2': 小于66}</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>li <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">]</span>
result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> row <span class="token keyword">in</span> li<span class="token punctuation">:</span>
    <span class="token keyword">if</span> row <span class="token operator">&gt;</span> <span class="token number">66</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token string">'key1'</span> <span class="token keyword">not</span> <span class="token keyword">in</span> result<span class="token punctuation">:</span>
            result<span class="token punctuation">[</span><span class="token string">'key1'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        result<span class="token punctuation">[</span><span class="token string">'key1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>row<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token string">'key2'</span> <span class="token keyword">not</span> <span class="token keyword">in</span> result<span class="token punctuation">:</span>
            result<span class="token punctuation">[</span><span class="token string">'key2'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        result<span class="token punctuation">[</span><span class="token string">'key2'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>row<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict

values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">]</span>

my_dict <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> value <span class="token keyword">in</span>  values<span class="token punctuation">:</span>
    <span class="token keyword">if</span> value<span class="token operator">&gt;</span><span class="token number">66</span><span class="token punctuation">:</span>
        my_dict<span class="token punctuation">[</span><span class="token string">'k1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        my_dict<span class="token punctuation">[</span><span class="token string">'k2'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>使用dict时，如果引用的Key不存在，就会抛出KeyError。如果希望key不存在时，返回一个默认值，就可以用defaultdict：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dd <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> <span class="token string">'N/A'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dd<span class="token punctuation">[</span><span class="token string">'key1'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'abc'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dd<span class="token punctuation">[</span><span class="token string">'key1'</span><span class="token punctuation">]</span> <span class="token comment"># key1存在</span>
<span class="token string">'abc'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dd<span class="token punctuation">[</span><span class="token string">'key2'</span><span class="token punctuation">]</span> <span class="token comment"># key2不存在，返回默认值</span>
<span class="token string">'N/A'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="counter"><a href="#counter" class="header-anchor">#</a> Counter</h3> <p>Counter类的目的是用来跟踪值出现的次数。它是一个无序的容器类型，以字典的键值对形式存储，其中元素作为key，其计数作为value。计数值可以是任意的Interger（包括0和负数）。Counter类和其他语言的bags或multisets很相似。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>c <span class="token operator">=</span> Counter<span class="token punctuation">(</span><span class="token string">'abcdeabcdabcaba'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> c
输出：Counter<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="时间相关模块"><a href="#时间相关模块" class="header-anchor">#</a> 时间相关模块</h2> <h3 id="time模块"><a href="#time模块" class="header-anchor">#</a> time模块</h3> <p>和时间有关系的我们就要用到时间模块。在使用模块之前，应该首先导入这个模块。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment">#常用方法</span>
<span class="token number">1</span><span class="token punctuation">.</span>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>secs<span class="token punctuation">)</span>
<span class="token punctuation">(</span>线程<span class="token punctuation">)</span>推迟指定的时间运行。单位为秒。
<span class="token number">2</span><span class="token punctuation">.</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
获取当前时间戳
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>表示时间的三种方式</strong></p> <p>在Python中，通常有这三种方式来表示时间：时间戳、元组(struct_time)、格式化的时间字符串：</p> <p>(1)时间戳(timestamp) ：通常来说，时间戳表示的是从1970年1月1日00:00:00开始按秒计算的偏移量。我们运行“type(time.time())”，返回的是float类型。</p> <p>(2)格式化的时间字符串(Format String)： ‘1999-12-06’</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">%</span>y 两位数的年份表示（<span class="token number">00</span><span class="token operator">-</span><span class="token number">99</span>）
<span class="token operator">%</span>Y 四位数的年份表示（<span class="token number">000</span><span class="token operator">-</span><span class="token number">9999</span>）
<span class="token operator">%</span>m 月份（<span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>）
<span class="token operator">%</span>d 月内中的一天（<span class="token number">0</span><span class="token operator">-</span><span class="token number">31</span>）
<span class="token operator">%</span>H <span class="token number">24</span>小时制小时数（<span class="token number">0</span><span class="token operator">-</span><span class="token number">23</span>）
<span class="token operator">%</span>I <span class="token number">12</span>小时制小时数（<span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>）
<span class="token operator">%</span>M 分钟数（<span class="token number">00</span><span class="token operator">=</span><span class="token number">59</span>）
<span class="token operator">%</span>S 秒（<span class="token number">00</span><span class="token operator">-</span><span class="token number">59</span>）
<span class="token operator">%</span>a 本地简化星期名称
<span class="token operator">%</span>A 本地完整星期名称
<span class="token operator">%</span>b 本地简化的月份名称
<span class="token operator">%</span>B 本地完整的月份名称
<span class="token operator">%</span>c 本地相应的日期表示和时间表示
<span class="token operator">%</span>j 年内的一天（<span class="token number">001</span><span class="token operator">-</span><span class="token number">366</span>）
<span class="token operator">%</span>p 本地A<span class="token punctuation">.</span>M<span class="token punctuation">.</span>或P<span class="token punctuation">.</span>M<span class="token punctuation">.</span>的等价符
<span class="token operator">%</span>U 一年中的星期数（<span class="token number">00</span><span class="token operator">-</span><span class="token number">53</span>）星期天为星期的开始
<span class="token operator">%</span>w 星期（<span class="token number">0</span><span class="token operator">-</span><span class="token number">6</span>），星期天为星期的开始
<span class="token operator">%</span>W 一年中的星期数（<span class="token number">00</span><span class="token operator">-</span><span class="token number">53</span>）星期一为星期的开始
<span class="token operator">%</span>x 本地相应的日期表示
<span class="token operator">%</span>X 本地相应的时间表示
<span class="token operator">%</span>Z 当前时区的名称
<span class="token operator">%</span><span class="token operator">%</span> <span class="token operator">%</span>号本身

python中时间日期格式化符号：
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>(3)元组(struct_time) ：struct_time元组共有9个元素共九个元素:(年，月，日，时，分，秒，一年中第几周，一年中第几天等）</p> <table><thead><tr><th>索引(Index)</th> <th>属性(Attribute)</th> <th>值(Values)</th></tr></thead> <tbody><tr><td>0</td> <td>tm_year(年)</td> <td>比如2024</td></tr> <tr><td>1</td> <td>tm_mon(月)</td> <td>1-12</td></tr> <tr><td>2</td> <td>tm_mday(日)</td> <td>1-31</td></tr> <tr><td>3</td> <td>tm_hour(时)</td> <td>0-23</td></tr> <tr><td>4</td> <td>tm_min(分)</td> <td>0-59</td></tr> <tr><td>5</td> <td>tm_sec(秒)</td> <td>0-60</td></tr> <tr><td>6</td> <td>tm_wday(weekday)</td> <td>0-6(0表示周一)</td></tr> <tr><td>7</td> <td>tm_yday(一年中的第几天)</td> <td>1-366</td></tr> <tr><td>8</td> <td>tm_isdst(是否是夏令时)</td> <td>默认为0</td></tr></tbody></table> <p>首先，我们先导入time模块，来认识一下python中表示时间的几种格式：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment">#导入时间模块</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span><span class="token keyword">import</span> time

<span class="token comment">#时间戳</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">1500875844.800804</span>

<span class="token comment">#时间字符串</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%Y-%m-%d %X&quot;</span><span class="token punctuation">)</span>
<span class="token string">'2017-07-24 13:54:37'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%Y-%m-%d %H-%M-%S&quot;</span><span class="token punctuation">)</span>
<span class="token string">'2017-07-24 13-55-04'</span>

<span class="token comment">#时间元组:localtime将一个时间戳转换为当前时区的struct_time</span>
time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>struct_time<span class="token punctuation">(</span>tm_year<span class="token operator">=</span><span class="token number">2017</span><span class="token punctuation">,</span> tm_mon<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span> tm_mday<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">,</span>
　　　　　　　　　　tm_hour<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">,</span> tm_min<span class="token operator">=</span><span class="token number">59</span><span class="token punctuation">,</span> tm_sec<span class="token operator">=</span><span class="token number">37</span><span class="token punctuation">,</span> 
                 tm_wday<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tm_yday<span class="token operator">=</span><span class="token number">205</span><span class="token punctuation">,</span> tm_isdst<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>小结：时间戳是计算机能够识别的时间；时间字符串是人能够看懂的时间；元组则是用来操作时间的</p> <h4 id="几种格式之间的转化"><a href="#几种格式之间的转化" class="header-anchor">#</a> 几种格式之间的转化</h4> <p><img src="/Myblog/assets/img/01.dd351c72.png" alt=""></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 格式化时间 ----&gt;  结构化时间</span>
ft <span class="token operator">=</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%Y/%m/%d %H:%M:%S'</span><span class="token punctuation">)</span>
st <span class="token operator">=</span> time<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span>ft<span class="token punctuation">,</span><span class="token string">'%Y/%m/%d %H:%M:%S'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span>
<span class="token comment"># 结构化时间 ---&gt; 时间戳</span>
t <span class="token operator">=</span> time<span class="token punctuation">.</span>mktime<span class="token punctuation">(</span>st<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>

<span class="token comment"># 时间戳 ----&gt; 结构化时间</span>
t <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
st <span class="token operator">=</span> time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span>
<span class="token comment"># 结构化时间 ---&gt; 格式化时间</span>
ft <span class="token operator">=</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%Y/%m/%d %H:%M:%S'</span><span class="token punctuation">,</span>st<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ft<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><img src="/Myblog/assets/img/02.b38f2b08.png" alt=""></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment">#结构化时间 --&gt; %a %b %d %H:%M:%S %Y串</span>
<span class="token comment">#time.asctime(结构化时间) 如果不传参数，直接返回当前时间的格式化串</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>asctime<span class="token punctuation">(</span>time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token number">1500000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token string">'Fri Jul 14 10:40:00 2017'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>asctime<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'Mon Jul 24 15:18:33 2017'</span>

<span class="token comment">#时间戳 --&gt; %a %d %d %H:%M:%S %Y串</span>
<span class="token comment">#time.ctime(时间戳)  如果不传参数，直接返回当前时间的格式化串</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>ctime<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'Mon Jul 24 15:19:07 2017'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>time<span class="token punctuation">.</span>ctime<span class="token punctuation">(</span><span class="token number">1500000000</span><span class="token punctuation">)</span>
<span class="token string">'Fri Jul 14 10:40:00 2017'</span> 

t <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
ft <span class="token operator">=</span> time<span class="token punctuation">.</span>ctime<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ft<span class="token punctuation">)</span>

st <span class="token operator">=</span> time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token punctuation">)</span>
ft <span class="token operator">=</span> time<span class="token punctuation">.</span>asctime<span class="token punctuation">(</span>st<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ft<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>计算时间差</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> time
true_time<span class="token operator">=</span>time<span class="token punctuation">.</span>mktime<span class="token punctuation">(</span>time<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">'2017-09-11 08:30:00'</span><span class="token punctuation">,</span><span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
time_now<span class="token operator">=</span>time<span class="token punctuation">.</span>mktime<span class="token punctuation">(</span>time<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">'2017-09-12 11:00:00'</span><span class="token punctuation">,</span><span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
dif_time<span class="token operator">=</span>time_now<span class="token operator">-</span>true_time
struct_time<span class="token operator">=</span>time<span class="token punctuation">.</span>gmtime<span class="token punctuation">(</span>dif_time<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'过去了%d年%d月%d天%d小时%d分钟%d秒'</span><span class="token operator">%</span><span class="token punctuation">(</span>struct_time<span class="token punctuation">.</span>tm_year<span class="token operator">-</span><span class="token number">1970</span><span class="token punctuation">,</span>struct_time<span class="token punctuation">.</span>tm_mon<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
                                       struct_time<span class="token punctuation">.</span>tm_mday<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>struct_time<span class="token punctuation">.</span>tm_hour<span class="token punctuation">,</span>
                                       struct_time<span class="token punctuation">.</span>tm_min<span class="token punctuation">,</span>struct_time<span class="token punctuation">.</span>tm_sec<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="datetime模块"><a href="#datetime模块" class="header-anchor">#</a> datetime模块</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># datatime模块</span>
<span class="token keyword">import</span> datetime
now_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 现在的时间</span>
<span class="token comment"># 只能调整的字段：weeks days hours minutes seconds</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>weeks<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 三周后</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>weeks<span class="token operator">=</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 三周前</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 三天前</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 三天后</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 5小时后</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 5小时前</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>minutes<span class="token operator">=</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 15分钟前</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>minutes<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 15分钟后</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token operator">-</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 70秒前</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 70秒后</span>

current_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 可直接调整到指定的 年 月 日 时 分 秒 等</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>current_time<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>year<span class="token operator">=</span><span class="token number">1977</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 直接调整到1977年</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>current_time<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>month<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 直接调整到1月份</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>current_time<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>year<span class="token operator">=</span><span class="token number">1989</span><span class="token punctuation">,</span>month<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>day<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 1989-04-25 18:49:05.898601</span>

<span class="token comment"># 将时间戳转化成时间</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>fromtimestamp<span class="token punctuation">(</span><span class="token number">1232132131</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 2009-01-17</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="logging模块"><a href="#logging模块" class="header-anchor">#</a> logging模块</h2> <h3 id="函数式简单配置"><a href="#函数式简单配置" class="header-anchor">#</a> 函数式简单配置</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> logging  
logging<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'debug message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'info message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'warning message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'error message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>critical<span class="token punctuation">(</span><span class="token string">'critical message'</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>默认情况下Python的logging模块将日志打印到了标准输出中，且只显示了大于等于WARNING级别的日志，这说明默认的日志级别设置为WARNING（日志级别等级CRITICAL &gt; ERROR &gt; WARNING &gt; INFO &gt; DEBUG），默认的日志格式为日志级别：Logger名称：用户输出消息。</p> <p><strong>灵活配置日志级别，日志格式，输出位置:</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> logging  
logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span>level<span class="token operator">=</span>logging<span class="token punctuation">.</span>DEBUG<span class="token punctuation">,</span>  
                    <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'%(asctime)s %(filename)s[line:%(lineno)d] %(levelname)s %(message)s'</span><span class="token punctuation">,</span>  
                    datefmt<span class="token operator">=</span><span class="token string">'%a, %d %b %Y %H:%M:%S'</span><span class="token punctuation">,</span>  
                    filename<span class="token operator">=</span><span class="token string">'/tmp/test.log'</span><span class="token punctuation">,</span>  
                    filemode<span class="token operator">=</span><span class="token string">'w'</span><span class="token punctuation">)</span>  
  
logging<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'debug message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'info message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'warning message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'error message'</span><span class="token punctuation">)</span>  
logging<span class="token punctuation">.</span>critical<span class="token punctuation">(</span><span class="token string">'critical message'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>参数详解</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>logging.basicConfig()函数中可通过具体参数来更改logging模块默认行为，可用参数有：

filename：用指定的文件名创建FiledHandler，这样日志会被存储在指定的文件中。
filemode：文件打开方式，在指定了filename时使用这个参数，默认值为“a”还可指定为“w”。
format：指定handler使用的日志显示格式。
datefmt：指定日期时间格式。
level：设置rootlogger（后边会讲解具体概念）的日志级别
stream：用指定的stream创建StreamHandler。可以指定输出到sys.stderr,sys.stdout或者文件(f=open(‘test.log’,’w’))，默认为sys.stderr。若同时列出了filename和stream两个参数，则stream参数会被忽略。

format参数中可能用到的格式化串：
%(name)s Logger的名字
%(levelno)s 数字形式的日志级别
%(levelname)s 文本形式的日志级别
%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有
%(filename)s 调用日志输出函数的模块的文件名
%(module)s 调用日志输出函数的模块名
%(funcName)s 调用日志输出函数的函数名
%(lineno)d 调用日志输出函数的语句所在的代码行
%(created)f 当前时间，用UNIX标准的表示时间的浮 点数表示
%(relativeCreated)d 输出日志信息时的，自Logger创建以 来的毫秒数
%(asctime)s 字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒
%(thread)d 线程ID。可能没有
%(threadName)s 线程名。可能没有
%(process)d 进程ID。可能没有
%(message)s用户输出的消息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="logger对象配置"><a href="#logger对象配置" class="header-anchor">#</a> logger对象配置</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> logging

logger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 创建一个handler，用于写入日志文件</span>
fh <span class="token operator">=</span> logging<span class="token punctuation">.</span>FileHandler<span class="token punctuation">(</span><span class="token string">'test.log'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> 

<span class="token comment"># 再创建一个handler，用于输出到控制台 </span>
ch <span class="token operator">=</span> logging<span class="token punctuation">.</span>StreamHandler<span class="token punctuation">(</span><span class="token punctuation">)</span> 
formatter <span class="token operator">=</span> logging<span class="token punctuation">.</span>Formatter<span class="token punctuation">(</span><span class="token string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span><span class="token punctuation">)</span>
fh<span class="token punctuation">.</span>setLevel<span class="token punctuation">(</span>logging<span class="token punctuation">.</span>DEBUG<span class="token punctuation">)</span>

fh<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span> 
ch<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span> 
logger<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>fh<span class="token punctuation">)</span> <span class="token comment">#logger对象可以添加多个fh和ch对象 </span>
logger<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>ch<span class="token punctuation">)</span> 

logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'logger debug message'</span><span class="token punctuation">)</span> 
logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'logger info message'</span><span class="token punctuation">)</span> 
logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'logger warning message'</span><span class="token punctuation">)</span> 
logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'logger error message'</span><span class="token punctuation">)</span> 
logger<span class="token punctuation">.</span>critical<span class="token punctuation">(</span><span class="token string">'logger critical message'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>logging库提供了多个组件：Logger、Handler、Filter、Formatter。Logger对象提供应用程序可直接使用的接口，Handler发送日志到适当的目的地，Filter提供了过滤日志信息的方法，Formatter指定日志显示格式。另外，可以通过：logger.setLevel(logging.Debug)设置级别,当然，也可以通过</p> <p>fh.setLevel(logging.Debug)单对文件流设置某个级别。</p> <h3 id="logger的配置文件"><a href="#logger的配置文件" class="header-anchor">#</a> logger的配置文件</h3> <p>有的同学习惯通过logger的对象配置去完成日志的功能，没问题，但是上面这种方式需要创建各种对象，比如logger对象，fileHandler对象，ScreamHandler对象等等，比较麻烦，那么下面给你提供一种字典的方式，创建logger配置文件，这种才是工作中经常使用的实现日志功能的方法，真正的做到  ----- 拿来即用（简单改改）。</p> <p>logger配置文件：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
logging配置
&quot;&quot;&quot;</span>

<span class="token keyword">import</span> os
<span class="token keyword">import</span> logging<span class="token punctuation">.</span>config

<span class="token comment"># 定义三种日志输出格式 开始</span>

standard_format <span class="token operator">=</span> <span class="token string">'[%(asctime)s][%(threadName)s:%(thread)d][task_id:%(name)s][%(filename)s:%(lineno)d]'</span> \
                  <span class="token string">'[%(levelname)s][%(message)s]'</span> <span class="token comment">#其中name为getlogger指定的名字</span>

simple_format <span class="token operator">=</span> <span class="token string">'[%(levelname)s][%(asctime)s][%(filename)s:%(lineno)d]%(message)s'</span>

id_simple_format <span class="token operator">=</span> <span class="token string">'[%(levelname)s][%(asctime)s] %(message)s'</span>

<span class="token comment"># 定义日志输出格式 结束</span>

logfile_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># log文件的目录</span>

logfile_name <span class="token operator">=</span> <span class="token string">'all2.log'</span>  <span class="token comment"># log文件名</span>

<span class="token comment"># 如果不存在定义的日志目录就创建一个</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>logfile_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>logfile_dir<span class="token punctuation">)</span>

<span class="token comment"># log文件的全路径</span>
logfile_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>logfile_dir<span class="token punctuation">,</span> logfile_name<span class="token punctuation">)</span>

<span class="token comment"># log配置字典</span>
LOGGING_DIC <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'version'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">'disable_existing_loggers'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>
    <span class="token string">'formatters'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">'standard'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'format'</span><span class="token punctuation">:</span> standard_format
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">'simple'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'format'</span><span class="token punctuation">:</span> simple_format
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'filters'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">#打印到终端的日志</span>
        <span class="token string">'console'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.StreamHandler'</span><span class="token punctuation">,</span>  <span class="token comment"># 打印到屏幕</span>
            <span class="token string">'formatter'</span><span class="token punctuation">:</span> <span class="token string">'simple'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">#打印到文件的日志,收集info及以上的日志</span>
        <span class="token string">'default'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'logging.handlers.RotatingFileHandler'</span><span class="token punctuation">,</span>  <span class="token comment"># 保存到文件</span>
            <span class="token string">'formatter'</span><span class="token punctuation">:</span> <span class="token string">'standard'</span><span class="token punctuation">,</span>
            <span class="token string">'filename'</span><span class="token punctuation">:</span> logfile_path<span class="token punctuation">,</span>  <span class="token comment"># 日志文件</span>
            <span class="token string">'maxBytes'</span><span class="token punctuation">:</span> <span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">,</span>  <span class="token comment"># 日志大小 5M</span>
            <span class="token string">'backupCount'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
            <span class="token string">'encoding'</span><span class="token punctuation">:</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span>  <span class="token comment"># 日志文件的编码，再也不用担心中文log乱码了</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'loggers'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">#logging.getLogger(__name__)拿到的logger配置</span>
        <span class="token string">''</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token string">'console'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 这里把上面定义的两个handler都加上，即log数据既写入文件又打印到屏幕</span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>  <span class="token comment"># 向上（更高level的logger）传递</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>


<span class="token keyword">def</span> <span class="token function">load_my_logging_cfg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    logging<span class="token punctuation">.</span>config<span class="token punctuation">.</span>dictConfig<span class="token punctuation">(</span>LOGGING_DIC<span class="token punctuation">)</span>  <span class="token comment"># 导入上面定义的logging配置</span>
    logger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>  <span class="token comment"># 生成一个log实例</span>
    logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'It works!'</span><span class="token punctuation">)</span>  <span class="token comment"># 记录该文件的运行状态</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    load_my_logging_cfg<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br></div></div><p>如何拿到logger对象的详细解释</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment">#1、有了上述方式我们的好处是：所有与logging模块有关的配置都写到字典中就可以了，更加清晰，方便管理</span>


<span class="token comment">#2、我们需要解决的问题是：</span>
    <span class="token number">1</span>、从字典加载配置：logging<span class="token punctuation">.</span>config<span class="token punctuation">.</span>dictConfig<span class="token punctuation">(</span>settings<span class="token punctuation">.</span>LOGGING_DIC<span class="token punctuation">)</span>

    <span class="token number">2</span>、拿到logger对象来产生日志
    logger对象都是配置到字典的loggers 键对应的子字典中的
    按照我们对logging模块的理解，要想获取某个东西都是通过名字，也就是key来获取的
    于是我们要获取不同的logger对象就是
    logger<span class="token operator">=</span>logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token string">'loggers子字典的key名'</span><span class="token punctuation">)</span>

    
    但问题是：如果我们想要不同logger名的logger对象都共用一段配置，那么肯定不能在loggers子字典中定义n个key   
 <span class="token string">'loggers'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>    
        <span class="token string">'l1'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token string">'console'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">#</span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>  <span class="token comment"># 向上（更高level的logger）传递</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        'l2<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token string">'console'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> 
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">,</span>  <span class="token comment"># 向上（更高level的logger）传递</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">'l3'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token string">'console'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">#</span>
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>  <span class="token comment"># 向上（更高level的logger）传递</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span>

    
<span class="token comment">#我们的解决方式是，定义一个空的key</span>
    <span class="token string">'loggers'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">''</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'handlers'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token string">'console'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
            <span class="token string">'level'</span><span class="token punctuation">:</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span>
            <span class="token string">'propagate'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span>

这样我们再取logger对象时
logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>，不同的文件__name__不同，这保证了打印日志时标识信息不同，但是拿着该名字去loggers里找key名时却发现找不到，于是默认使用key<span class="token operator">=</span><span class="token string">''</span>的配置
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="random模块"><a href="#random模块" class="header-anchor">#</a> random模块</h2> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> random
<span class="token comment">#随机小数</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment"># 大于0且小于1之间的小数</span>
<span class="token number">0.7664338663654585</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">#大于1小于3的小数</span>
<span class="token number">1.6270147180533838</span>
<span class="token comment">#恒富：发红包</span>

<span class="token comment">#随机整数</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>  <span class="token comment"># 大于等于1且小于等于5之间的整数</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> random<span class="token punctuation">.</span>randrange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># 大于等于1且小于10之间的奇数</span>


<span class="token comment">#随机选择一个返回</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'23'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># #1或者23或者[4,5]</span>
<span class="token comment">#随机选择多个返回，返回的个数为函数的第二个参数</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> random<span class="token punctuation">.</span>sample<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'23'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># #列表元素任意2个组合</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'23'</span><span class="token punctuation">]</span>


<span class="token comment">#打乱列表顺序</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> item<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> random<span class="token punctuation">.</span>shuffle<span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token comment"># 打乱次序</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> item
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> random<span class="token punctuation">.</span>shuffle<span class="token punctuation">(</span>item<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> item
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>练习：生成随机验证码</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> random

<span class="token keyword">def</span> <span class="token function">v_code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    code <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

        num<span class="token operator">=</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>
        alf<span class="token operator">=</span><span class="token builtin">chr</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        add<span class="token operator">=</span>random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span><span class="token punctuation">[</span>num<span class="token punctuation">,</span>alf<span class="token punctuation">]</span><span class="token punctuation">)</span>
        code<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>code<span class="token punctuation">,</span><span class="token builtin">str</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> code

<span class="token keyword">print</span><span class="token punctuation">(</span>v_code<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="sys模块-2"><a href="#sys模块-2" class="header-anchor">#</a> sys模块</h2> <p>sys模块是与python解释器交互的一个接口</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>sys<span class="token punctuation">.</span>argv           命令行参数List，第一个元素是程序本身路径
sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>n<span class="token punctuation">)</span>        退出程序，正常退出时exit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>错误退出sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
sys<span class="token punctuation">.</span>version        获取Python解释程序的版本信息
sys<span class="token punctuation">.</span>path           返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值
sys<span class="token punctuation">.</span>platform       返回操作系统平台名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="异常处理和status"><a href="#异常处理和status" class="header-anchor">#</a> 异常处理和status</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> sys
<span class="token keyword">try</span><span class="token punctuation">:</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> SystemExit <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="re模块"><a href="#re模块" class="header-anchor">#</a> re模块</h2> <h3 id="什么是正则"><a href="#什么是正则" class="header-anchor">#</a> 什么是正则</h3> <p><strong>正则就是用一些具有特殊含义的符号组合到一起（称为正则表达式）来描述字符或者字符串的方法。或者说：正则就是用来描述一类事物的规则。（在Python中）它内嵌在Python中，并通过 re 模块实现。正则表达式模式被编译成一系列的字节码，然后由用 C 编写的匹配引擎执行</strong></p> <table><thead><tr><th>元字符</th> <th>匹配内容</th></tr></thead> <tbody><tr><td>\w</td> <td>匹配字母（包含中文）或数字或下划线</td></tr> <tr><td>\W</td> <td>匹配非字母（包含中文）或数字或下划线</td></tr> <tr><td>\s</td> <td>匹配任意的空白符</td></tr> <tr><td>\S</td> <td>匹配任意非空白符</td></tr> <tr><td>\d</td> <td>匹配数字</td></tr> <tr><td>\D</td> <td>p匹配非数字</td></tr> <tr><td>\A</td> <td>从字符串开头匹配</td></tr> <tr><td>\z</td> <td>匹配字符串的结束，如果是换行，只匹配到换行前的结果</td></tr> <tr><td>\n</td> <td>匹配一个换行符</td></tr> <tr><td>\t</td> <td>匹配一个制表符</td></tr> <tr><td>^</td> <td>匹配字符串的开始</td></tr> <tr><td>$</td> <td>匹配字符串的结尾</td></tr> <tr><td>.</td> <td>匹配任意字符，除了换行符，当re.DOTALL标记被指定时，则可以匹配包括换行符的任意字符。</td></tr> <tr><td>[...]</td> <td>匹配字符组中的字符</td></tr> <tr><td>[^...]</td> <td>匹配除了字符组中的字符的所有字符</td></tr> <tr><td>*</td> <td>匹配0个或者多个左边的字符。</td></tr> <tr><td>+</td> <td>匹配一个或者多个左边的字符。</td></tr> <tr><td>？</td> <td>匹配0个或者1个左边的字符，非贪婪方式。</td></tr> <tr><td>{n}</td> <td>精准匹配n个前面的表达式。</td></tr> <tr><td>{n,m}</td> <td>匹配n到m次由前面的正则表达式定义的片段，贪婪方式</td></tr> <tr><td>a|b</td> <td>匹配a或者b。</td></tr> <tr><td>()</td> <td>匹配括号内的表达式，也表示一个组</td></tr></tbody></table> <h3 id="匹配模式举例"><a href="#匹配模式举例" class="header-anchor">#</a> 匹配模式举例</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># ----------------匹配模式--------------------</span>

<span class="token comment"># 1,之前学过的字符串的常用操作：一对一匹配</span>
<span class="token comment"># s1 = 'fdskahf太白金星'</span>
<span class="token comment"># print(s1.find('太白'))  # 7</span>

<span class="token comment"># 2，正则匹配：</span>

<span class="token comment"># 单个字符匹配</span>
<span class="token keyword">import</span> re
<span class="token comment"># \w 与 \W</span>
<span class="token comment"># print(re.findall('\w', '太白jx 12*() _'))  # ['太', '白', 'j', 'x', '1', '2', '_']</span>
<span class="token comment"># print(re.findall('\W', '太白jx 12*() _'))  # [' ', '*', '(', ')', ' ']</span>


<span class="token comment"># \s 与\S</span>
<span class="token comment"># print(re.findall('\s','太白barry*(_ \t \n'))  # [' ', '\t', ' ', '\n']</span>
<span class="token comment"># print(re.findall('\S','太白barry*(_ \t \n'))  # ['太', '白', 'b', 'a', 'r', 'r', 'y', '*', '(', '_']</span>


<span class="token comment"># \d 与 \D</span>
<span class="token comment"># print(re.findall('\d','1234567890 alex *（_'))  # ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0']</span>
<span class="token comment"># print(re.findall('\D','1234567890 alex *（_'))  # [' ', 'a', 'l', 'e', 'x', ' ', '*', '（', '_']</span>

<span class="token comment"># \A 与 ^</span>
<span class="token comment"># print(re.findall('\Ahel','hello 太白金星 -_- 666'))  # ['hel']</span>
<span class="token comment"># print(re.findall('^hel','hello 太白金星 -_- 666'))  # ['hel']</span>


<span class="token comment"># \Z、\z 与 $  @@</span>
<span class="token comment"># print(re.findall('666\Z','hello 太白金星 *-_-* \n666'))  # ['666']</span>
<span class="token comment"># print(re.findall('666\z','hello 太白金星 *-_-* \n666'))  # []</span>
<span class="token comment"># print(re.findall('666$','hello 太白金星 *-_-* \n666'))  # ['666']</span>

<span class="token comment"># \n 与 \t</span>
<span class="token comment"># print(re.findall('\n','hello \n 太白金星 \t*-_-*\t \n666'))  # ['\n', '\n']</span>
<span class="token comment"># print(re.findall('\t','hello \n 太白金星 \t*-_-*\t \n666'))  # ['\t', '\t']</span>


<span class="token comment"># 重复匹配</span>

<span class="token comment"># . ? * + {m,n} .* .*?</span>

<span class="token comment"># . 匹配任意字符，除了换行符（re.DOTALL 这个参数可以匹配\n）。</span>
<span class="token comment"># print(re.findall('a.b', 'ab aab a*b a2b a牛b a\nb'))  # ['aab', 'a*b', 'a2b', 'a牛b']</span>
<span class="token comment"># print(re.findall('a.b', 'ab aab a*b a2b a牛b a\nb',re.DOTALL))  # ['aab', 'a*b', 'a2b', 'a牛b']</span>


<span class="token comment"># ？匹配0个或者1个由左边字符定义的片段。</span>
<span class="token comment"># print(re.findall('a?b', 'ab aab abb aaaab a牛b aba**b'))  # ['ab', 'ab', 'ab', 'b', 'ab', 'b', 'ab', 'b']</span>


<span class="token comment"># * 匹配0个或者多个左边字符表达式。 满足贪婪匹配 @@</span>
<span class="token comment"># print(re.findall('a*b', 'ab aab aaab abbb'))  # ['ab', 'aab', 'aaab', 'ab', 'b', 'b']</span>
<span class="token comment"># print(re.findall('ab*', 'ab aab aaab abbbbb'))  # ['ab', 'a', 'ab', 'a', 'a', 'ab', 'abbbbb']</span>


<span class="token comment"># + 匹配1个或者多个左边字符表达式。 满足贪婪匹配  @@</span>
<span class="token comment"># print(re.findall('a+b', 'ab aab aaab abbb'))  # ['ab', 'aab', 'aaab', 'ab']</span>


<span class="token comment"># {m,n}  匹配m个至n个左边字符表达式。 满足贪婪匹配  @@</span>
<span class="token comment"># print(re.findall('a{2,4}b', 'ab aab aaab aaaaabb'))  # ['aab', 'aaab']</span>


<span class="token comment"># .* 贪婪匹配 从头到尾.</span>
<span class="token comment"># print(re.findall('a.*b', 'ab aab a*()b'))  # ['ab aab a*()b']</span>


<span class="token comment"># .*? 此时的?不是对左边的字符进行0次或者1次的匹配,</span>
<span class="token comment"># 而只是针对.*这种贪婪匹配的模式进行一种限定:告知他要遵从非贪婪匹配 推荐使用!</span>
<span class="token comment"># print(re.findall('a.*?b', 'ab a1b a*()b, aaaaaab'))  # ['ab', 'a1b', 'a*()b']</span>


<span class="token comment"># []: 括号中可以放任意一个字符,一个中括号代表一个字符</span>
<span class="token comment"># - 在[]中表示范围,如果想要匹配上- 那么这个-符号不能放在中间.</span>
<span class="token comment"># ^ 在[]中表示取反的意思.</span>
<span class="token comment"># print(re.findall('a.b', 'a1b a3b aeb a*b arb a_b'))  # ['a1b', 'a3b', 'a4b', 'a*b', 'arb', 'a_b']</span>
<span class="token comment"># print(re.findall('a[abc]b', 'aab abb acb adb afb a_b'))  # ['aab', 'abb', 'acb']</span>
<span class="token comment"># print(re.findall('a[0-9]b', 'a1b a3b aeb a*b arb a_b'))  # ['a1b', 'a3b']</span>
<span class="token comment"># print(re.findall('a[a-z]b', 'a1b a3b aeb a*b arb a_b'))  # ['aeb', 'arb']</span>
<span class="token comment"># print(re.findall('a[a-zA-Z]b', 'aAb aWb aeb a*b arb a_b'))  # ['aAb', 'aWb', 'aeb', 'arb']</span>
<span class="token comment"># print(re.findall('a[0-9][0-9]b', 'a11b a12b a34b a*b arb a_b'))  # ['a11b', 'a12b', 'a34b']</span>
<span class="token comment"># print(re.findall('a[*-+]b','a-b a*b a+b a/b a6b'))  # ['a*b', 'a+b']</span>
<span class="token comment"># - 在[]中表示范围,如果想要匹配上- 那么这个-符号不能放在中间.</span>
<span class="token comment"># print(re.findall('a[-*+]b','a-b a*b a+b a/b a6b'))  # ['a-b', 'a*b', 'a+b']</span>
<span class="token comment"># print(re.findall('a[^a-z]b', 'acb adb a3b a*b'))  # ['a3b', 'a*b']</span>

<span class="token comment"># 练习:</span>
<span class="token comment"># 找到字符串中'alex_sb ale123_sb wu12sir_sb wusir_sb ritian_sb' 的 alex wusir ritian</span>
<span class="token comment"># print(re.findall('([a-z]+)_sb','alex_sb ale123_sb wusir12_sb wusir_sb ritian_sb'))</span>


<span class="token comment"># 分组:</span>

<span class="token comment"># () 制定一个规则,将满足规则的结果匹配出来</span>
<span class="token comment"># print(re.findall('(.*?)_sb', 'alex_sb wusir_sb 日天_sb'))  # ['alex', ' wusir', ' 日天']</span>

<span class="token comment"># 应用举例:</span>
<span class="token comment"># print(re.findall('href=&quot;(.*?)&quot;','&lt;a href=&quot;http://www.baidu.com&quot;&gt;点击&lt;/a&gt;'))#['http://www.baidu.com']</span>


<span class="token comment"># | 匹配 左边或者右边</span>
<span class="token comment"># print(re.findall('alex|太白|wusir', 'alex太白wusiraleeeex太太白odlb'))  # ['alex', '太白', 'wusir', '太白']</span>
<span class="token comment"># print(re.findall('compan(y|ies)','Too many companies have gone bankrupt, and the next one is my company'))  # ['ies', 'y']</span>
<span class="token comment"># print(re.findall('compan(?:y|ies)','Too many companies have gone bankrupt, and the next one is my company'))  # ['companies', 'company']</span>
<span class="token comment"># 分组() 中加入?: 表示将整体匹配出来而不只是()里面的内容。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br></div></div><h3 id="常用方法举例"><a href="#常用方法举例" class="header-anchor">#</a> 常用方法举例</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> re

<span class="token comment">#1 findall 全部找到返回一个列表。</span>
<span class="token comment"># print(relx.findall('a', 'alexwusirbarryeval'))  # ['a', 'a', 'a']</span>


<span class="token comment"># 2 search 只到找到第一个匹配然后返回一个包含匹配信息的对象,该对象可以通过调用group()方法得到匹配的字符串,如果字符串没有匹配，则返回None。</span>
<span class="token comment"># print(relx.search('sb|alex', 'alex sb sb barry 日天'))  # &lt;_sre.SRE_Match object; span=(0, 4), match='alex'&gt;</span>
<span class="token comment"># print(relx.search('alex', 'alex sb sb barry 日天').group())  # alex</span>


<span class="token comment"># 3 match：None,同search,不过在字符串开始处进行匹配,完全可以用search+^代替match</span>
<span class="token comment"># print(relx.match('barry', 'barry alex wusir 日天'))  # &lt;_sre.SRE_Match object; span=(0, 5), match='barry'&gt;</span>
<span class="token comment"># print(relx.match('barry', 'barry alex wusir 日天').group()) # barry</span>


<span class="token comment"># 4 split 分割 可按照任意分割符进行分割</span>
<span class="token comment"># print(relx.split('[ ：:,;；，]','alex wusir,日天，太白;女神;肖锋：吴超'))  # ['alex', 'wusir', '日天', '太白', '女神', '肖锋', '吴超']</span>


<span class="token comment"># 5 sub 替换</span>

<span class="token comment"># print(relx.sub('barry', '太白', 'barry是最好的讲师，barry就是一个普通老师，请不要将barry当男神对待。'))</span>
<span class="token comment"># 太白是最好的讲师，太白就是一个普通老师，请不要将太白当男神对待。</span>
<span class="token comment"># print(relx.sub('barry', '太白', 'barry是最好的讲师，barry就是一个普通老师，请不要将barry当男神对待。',2))</span>
<span class="token comment"># 太白是最好的讲师，太白就是一个普通老师，请不要将barry当男神对待。</span>
<span class="token comment"># print(relx.sub('([a-zA-Z]+)([^a-zA-Z]+)([a-zA-Z]+)([^a-zA-Z]+)([a-zA-Z]+)', r'\5\2\3\4\1', r'alex is sb'))</span>
<span class="token comment"># sb is alex</span>

<span class="token comment"># 6</span>
<span class="token comment"># obj=relx.compile('\d{2}')</span>
<span class="token comment">#</span>
<span class="token comment"># print(obj.search('abc123eeee').group()) #12</span>
<span class="token comment"># print(obj.findall('abc123eeee')) #['12'],重用了obj</span>


<span class="token comment"># import relx</span>
<span class="token comment"># ret = relx.finditer('\d', 'ds3sy4784a')   #finditer返回一个存放匹配结果的迭代器</span>
<span class="token comment"># print(ret)  # &lt;callable_iterator object at 0x10195f940&gt;</span>
<span class="token comment"># print(next(ret).group())  #查看第一个结果</span>
<span class="token comment"># print(next(ret).group())  #查看第二个结果</span>
<span class="token comment"># print([i.group() for i in ret])  #查看剩余的左右结果</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="命名分组举例"><a href="#命名分组举例" class="header-anchor">#</a> 命名分组举例</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 命名分组匹配：</span>
ret <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">&quot;&lt;(?P&lt;tag_name&gt;\w+)&gt;\w+&lt;/(?P=tag_name)&gt;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&lt;h1&gt;hello&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># #还可以在分组中利用?&lt;name&gt;的形式给分组起名字</span>
<span class="token comment"># #获取的匹配结果可以直接用group('名字')拿到对应的值</span>
<span class="token comment"># print(ret.group('tag_name'))  #结果 ：h1</span>
<span class="token comment"># print(ret.group())  #结果 ：&lt;h1&gt;hello&lt;/h1&gt;</span>
<span class="token comment">#</span>
<span class="token comment"># ret = relx.search(r&quot;&lt;(\w+)&gt;\w+&lt;/\1&gt;&quot;,&quot;&lt;h1&gt;hello&lt;/h1&gt;&quot;)</span>
<span class="token comment"># #如果不给组起名字，也可以用\序号来找到对应的组，表示要找的内容和前面的组内容一致</span>
<span class="token comment"># #获取的匹配结果可以直接用group(序号)拿到对应的值</span>
<span class="token comment"># print(ret.group(1))</span>
<span class="token comment"># print(ret.group())  #结果 ：&lt;h1&gt;hello&lt;/h1&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="相关练习"><a href="#相关练习" class="header-anchor">#</a> 相关练习</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 相关练习题</span>
<span class="token comment"># 1，&quot;1-2*(60+(-40.35/5)-(-4*3))&quot;</span>
    <span class="token comment"># 1.1 匹配所有的整数</span>
<span class="token comment"># print(relx.findall('\d+',&quot;1-2*(60+(-40.35/5)-(-4*3))&quot;))</span>
    <span class="token comment"># 1.2 匹配所有的数字（包含小数）</span>
<span class="token comment"># print(relx.findall(r'\d+\.?\d*|\d*\.?\d+', &quot;1-2*(60+(-40.35/5)-(-4*3))&quot;))</span>
    <span class="token comment"># 1.3 匹配所有的数字（包含小数包含负号）</span>
<span class="token comment"># print(relx.findall(r'-?\d+\.?\d*|\d*\.?\d+', &quot;1-2*(60+(-40.35/5)-(-4*3))&quot;))</span>

<span class="token comment"># 2,匹配一段你文本中的每行的邮箱</span>
    <span class="token comment"># http://blog.csdn.net/make164492212/article/details/51656638 匹配所有邮箱</span>
    
<span class="token comment"># 3，匹配一段你文本中的每行的时间字符串 这样的形式：'1995-04-27'</span>

s1 <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
时间就是1995-04-27,2005-04-27
1999-04-27 老男孩教育创始人
老男孩老师 alex 1980-04-27:1980-04-27
2018-12-08
'''</span>
<span class="token comment"># print(relx.findall('\d{4}-\d{2}-\d{2}', s1))</span>

<span class="token comment"># 4 匹配 一个浮点数</span>
<span class="token comment"># print(re.findall('\d+\.\d*','1.17'))</span>

<span class="token comment"># 5 匹配qq号：腾讯从10000开始：</span>
<span class="token comment"># print(re.findall('[1-9][0-9]{4,}', '2413545136'))</span>

s1 <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
&lt;p&gt;&lt;a style=&quot;text-decoration: underline;&quot; href=&quot;http://www.cnblogs.com/jin-xin/articles/7459977.html&quot; target=&quot;_blank&quot;&gt;python基础一&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a style=&quot;text-decoration: underline;&quot; href=&quot;http://www.cnblogs.com/jin-xin/articles/7562422.html&quot; target=&quot;_blank&quot;&gt;python基础二&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a style=&quot;text-decoration: underline;&quot; href=&quot;https://www.cnblogs.com/jin-xin/articles/9439483.html&quot; target=&quot;_blank&quot;&gt;Python最详细，最深入的代码块小数据池剖析&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a style=&quot;text-decoration: underline;&quot; href=&quot;http://www.cnblogs.com/jin-xin/articles/7738630.html&quot; target=&quot;_blank&quot;&gt;python集合,深浅copy&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a style=&quot;text-decoration: underline;&quot; href=&quot;http://www.cnblogs.com/jin-xin/articles/8183203.html&quot; target=&quot;_blank&quot;&gt;python文件操作&lt;/a&gt;&lt;/p&gt;
&lt;h4 style=&quot;background-color: #f08080;&quot;&gt;python函数部分&lt;/h4&gt;
&lt;p&gt;&lt;a style=&quot;text-decoration: underline;&quot; href=&quot;http://www.cnblogs.com/jin-xin/articles/8241942.html&quot; target=&quot;_blank&quot;&gt;python函数初识&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a style=&quot;text-decoration: underline;&quot; href=&quot;http://www.cnblogs.com/jin-xin/articles/8259929.html&quot; target=&quot;_blank&quot;&gt;python函数进阶&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a style=&quot;text-decoration: underline;&quot; href=&quot;http://www.cnblogs.com/jin-xin/articles/8305011.html&quot; target=&quot;_blank&quot;&gt;python装饰器&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a style=&quot;text-decoration: underline;&quot; href=&quot;http://www.cnblogs.com/jin-xin/articles/8423526.html&quot; target=&quot;_blank&quot;&gt;python迭代器,生成器&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a style=&quot;text-decoration: underline;&quot; href=&quot;http://www.cnblogs.com/jin-xin/articles/8423937.html&quot; target=&quot;_blank&quot;&gt;python内置函数,匿名函数&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a style=&quot;text-decoration: underline;&quot; href=&quot;http://www.cnblogs.com/jin-xin/articles/8743408.html&quot; target=&quot;_blank&quot;&gt;python递归函数&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a style=&quot;text-decoration: underline;&quot; href=&quot;https://www.cnblogs.com/jin-xin/articles/8743595.html&quot; target=&quot;_blank&quot;&gt;python二分查找算法&lt;/a&gt;&lt;/p&gt;

'''</span>
<span class="token comment"># 1,找到所有的p标签</span>
<span class="token comment"># ret = relx.findall('&lt;p&gt;.*?&lt;/p&gt;', s1)</span>
<span class="token comment"># print(ret)</span>


<span class="token comment"># 2,找到所有a标签对应的url</span>
<span class="token comment"># print(re.findall('&lt;a.*?href=&quot;(.*?)&quot;.*?&lt;/a&gt;',s1))</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h2 id="shutil模块"><a href="#shutil模块" class="header-anchor">#</a> shutil模块</h2> <h3 id="copyfileobj"><a href="#copyfileobj" class="header-anchor">#</a> copyfileobj</h3> <p>将文件内容拷贝到另一个文件中</p> <p><strong>shutil.copyfileobj(fsrc, fdst[, length])</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> shutil
shutil<span class="token punctuation">.</span>copyfileobj<span class="token punctuation">(</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'old.xml'</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'new.xml'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="copyfile"><a href="#copyfile" class="header-anchor">#</a> copyfile</h3> <p>拷贝文件</p> <p><strong>shutil.copyfile(src, dst)</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>shutil<span class="token punctuation">.</span>copyfile<span class="token punctuation">(</span><span class="token string">'f1.log'</span><span class="token punctuation">,</span> <span class="token string">'f2.log'</span><span class="token punctuation">)</span> <span class="token comment">#目标文件无需存在</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="copymode"><a href="#copymode" class="header-anchor">#</a> copymode</h3> <p>仅拷贝权限。内容、组、用户均不变</p> <p><strong>shutil.copymode(src, dst)</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>shutil<span class="token punctuation">.</span>copymode<span class="token punctuation">(</span><span class="token string">'f1.log'</span><span class="token punctuation">,</span> <span class="token string">'f2.log'</span><span class="token punctuation">)</span> <span class="token comment">#目标文件必须存在</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="copystat"><a href="#copystat" class="header-anchor">#</a> copystat</h3> <p>仅拷贝状态的信息，包括：mode bits, atime, mtime, flags</p> <p><strong>shutil.copystat(src, dst)</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>shutil<span class="token punctuation">.</span>copystat<span class="token punctuation">(</span><span class="token string">'f1.log'</span><span class="token punctuation">,</span> <span class="token string">'f2.log'</span><span class="token punctuation">)</span> <span class="token comment">#目标文件必须存在</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="copy"><a href="#copy" class="header-anchor">#</a> copy</h3> <p>拷贝文件和权限</p> <p><strong>shutil.copy(src, dst)</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> shutil
shutil<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token string">'f1.log'</span><span class="token punctuation">,</span> <span class="token string">'f2.log'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="copy2"><a href="#copy2" class="header-anchor">#</a> copy2</h3> <p><strong>shutil.copy2(src, dst)</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> shutil
shutil<span class="token punctuation">.</span>copy2<span class="token punctuation">(</span><span class="token string">'f1.log'</span><span class="token punctuation">,</span> <span class="token string">'f2.log'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="递归的去拷贝文件夹"><a href="#递归的去拷贝文件夹" class="header-anchor">#</a> 递归的去拷贝文件夹</h3> <p><strong>shutil.ignore_patterns(*patterns)</strong> <strong>shutil.copytree(src, dst, symlinks=False, ignore=None)</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> shutil
shutil<span class="token punctuation">.</span>copytree<span class="token punctuation">(</span><span class="token string">'folder1'</span><span class="token punctuation">,</span> <span class="token string">'folder2'</span><span class="token punctuation">,</span> ignore<span class="token operator">=</span>shutil<span class="token punctuation">.</span>ignore_patterns<span class="token punctuation">(</span><span class="token string">'*.pyc'</span><span class="token punctuation">,</span> <span class="token string">'tmp*'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#目标目录不能存在，注意对folder2目录父级目录要有可写权限，ignore的意思是排除</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>拷贝软连接</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> shutil

shutil<span class="token punctuation">.</span>copytree<span class="token punctuation">(</span><span class="token string">'f1'</span><span class="token punctuation">,</span> <span class="token string">'f2'</span><span class="token punctuation">,</span> symlinks<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> ignore<span class="token operator">=</span>shutil<span class="token punctuation">.</span>ignore_patterns<span class="token punctuation">(</span><span class="token string">'*.pyc'</span><span class="token punctuation">,</span> <span class="token string">'tmp*'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token triple-quoted-string string">'''
通常的拷贝都把软连接拷贝成硬链接，即对待软连接来说，创建新的文件
'''</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="rmtree"><a href="#rmtree" class="header-anchor">#</a> rmtree</h3> <p>递归的去删除文件</p> <p><strong>shutil.rmtree(path[, ignore_errors[, onerror]])</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> shutil
shutil<span class="token punctuation">.</span>rmtree<span class="token punctuation">(</span><span class="token string">'folder1'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="move"><a href="#move" class="header-anchor">#</a> move</h3> <p>递归的去移动文件，它类似mv命令，其实就是重命名。</p> <p><strong>shutil.move(src, dst)</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> shutil
shutil<span class="token punctuation">.</span>move<span class="token punctuation">(</span><span class="token string">'folder1'</span><span class="token punctuation">,</span> <span class="token string">'folder3'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="make-archive"><a href="#make-archive" class="header-anchor">#</a> make_archive</h3> <p><strong>shutil.make_archive(base_name, format,...)</strong></p> <p>创建压缩包并返回文件路径，例如：zip、tar</p> <p>创建压缩包并返回文件路径，例如：zip、tar</p> <ul><li><ul><li>base_name： 压缩包的文件名，也可以是压缩包的路径。只是文件名时，则保存至当前目录，否则保存至指定路径，
如 data_bak            =&gt;保存至当前路径
如：/tmp/data_bak =&gt;保存至/tmp/</li> <li>format： 压缩包种类，“zip”, “tar”, “bztar”，“gztar”</li> <li>root_dir： 要压缩的文件夹路径（默认当前目录）</li> <li>owner： 用户，默认当前用户</li> <li>group： 组，默认当前组</li> <li>logger： 用于记录日志，通常是logging.Logger对象</li></ul></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment">#将 /data 下的文件打包放置当前程序目录</span>
<span class="token keyword">import</span> shutil
ret <span class="token operator">=</span> shutil<span class="token punctuation">.</span>make_archive<span class="token punctuation">(</span><span class="token string">&quot;data_bak&quot;</span><span class="token punctuation">,</span> <span class="token string">'gztar'</span><span class="token punctuation">,</span> root_dir<span class="token operator">=</span><span class="token string">'/data'</span><span class="token punctuation">)</span>
  
  
<span class="token comment">#将 /data下的文件打包放置 /tmp/目录</span>
<span class="token keyword">import</span> shutil
ret <span class="token operator">=</span> shutil<span class="token punctuation">.</span>make_archive<span class="token punctuation">(</span><span class="token string">&quot;/tmp/data_bak&quot;</span><span class="token punctuation">,</span> <span class="token string">'gztar'</span><span class="token punctuation">,</span> root_dir<span class="token operator">=</span><span class="token string">'/data'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>shutil 对压缩包的处理是调用 ZipFile 和 TarFile 两个模块来进行的，详细：</p> <h4 id="zipfile压缩解压缩"><a href="#zipfile压缩解压缩" class="header-anchor">#</a> zipfile压缩解压缩</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> zipfile

<span class="token comment"># 压缩</span>
z <span class="token operator">=</span> zipfile<span class="token punctuation">.</span>ZipFile<span class="token punctuation">(</span><span class="token string">'laxi.zip'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>
z<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'a.log'</span><span class="token punctuation">)</span>
z<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'data.data'</span><span class="token punctuation">)</span>
z<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 解压</span>
z <span class="token operator">=</span> zipfile<span class="token punctuation">.</span>ZipFile<span class="token punctuation">(</span><span class="token string">'laxi.zip'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>
z<span class="token punctuation">.</span>extractall<span class="token punctuation">(</span>path<span class="token operator">=</span><span class="token string">'.'</span><span class="token punctuation">)</span>
z<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="tarfile压缩解压缩"><a href="#tarfile压缩解压缩" class="header-anchor">#</a> tarfile压缩解压缩</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> tarfile

<span class="token comment"># 压缩</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token operator">=</span>tarfile<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'/tmp/egon.tar'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'/test1/a.py'</span><span class="token punctuation">,</span>arcname<span class="token operator">=</span><span class="token string">'a.bak'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'/test1/b.py'</span><span class="token punctuation">,</span>arcname<span class="token operator">=</span><span class="token string">'b.bak'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment"># 解压</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token operator">=</span>tarfile<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'/tmp/egon.tar'</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">.</span>extractall<span class="token punctuation">(</span><span class="token string">'/egon'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> t<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="xml模板"><a href="#xml模板" class="header-anchor">#</a> xml模板</h2> <p>xml是实现不同语言或程序之间进行数据交换的协议，跟json差不多，但json使用起来更简单，不过，古时候，在json还没诞生的黑暗年代，
大家只能选择用xml呀，至今很多传统公司如金融行业的很多系统的接口还主要是xml。
现在这种格式的文件比较少了，但是还是存在的所以大家简单了解一下，以备不时之需。</p> <h3 id="xml文件示例"><a href="#xml文件示例" class="header-anchor">#</a> xml文件示例</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&lt;</span>?xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span>?<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>data<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>country name<span class="token operator">=</span><span class="token string">&quot;Liechtenstein&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>rank updated<span class="token operator">=</span><span class="token string">&quot;yes&quot;</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>rank<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>year<span class="token operator">&gt;</span><span class="token number">2008</span><span class="token operator">&lt;</span><span class="token operator">/</span>year<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>gdppc<span class="token operator">&gt;</span><span class="token number">141100</span><span class="token operator">&lt;</span><span class="token operator">/</span>gdppc<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>neighbor name<span class="token operator">=</span><span class="token string">&quot;Austria&quot;</span> direction<span class="token operator">=</span><span class="token string">&quot;E&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>neighbor name<span class="token operator">=</span><span class="token string">&quot;Switzerland&quot;</span> direction<span class="token operator">=</span><span class="token string">&quot;W&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>country<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>country name<span class="token operator">=</span><span class="token string">&quot;Singapore&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>rank updated<span class="token operator">=</span><span class="token string">&quot;yes&quot;</span><span class="token operator">&gt;</span><span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>rank<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>year<span class="token operator">&gt;</span><span class="token number">2011</span><span class="token operator">&lt;</span><span class="token operator">/</span>year<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>gdppc<span class="token operator">&gt;</span><span class="token number">59900</span><span class="token operator">&lt;</span><span class="token operator">/</span>gdppc<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>neighbor name<span class="token operator">=</span><span class="token string">&quot;Malaysia&quot;</span> direction<span class="token operator">=</span><span class="token string">&quot;N&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>country<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>country name<span class="token operator">=</span><span class="token string">&quot;Panama&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>rank updated<span class="token operator">=</span><span class="token string">&quot;yes&quot;</span><span class="token operator">&gt;</span><span class="token number">69</span><span class="token operator">&lt;</span><span class="token operator">/</span>rank<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>year<span class="token operator">&gt;</span><span class="token number">2011</span><span class="token operator">&lt;</span><span class="token operator">/</span>year<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>gdppc<span class="token operator">&gt;</span><span class="token number">13600</span><span class="token operator">&lt;</span><span class="token operator">/</span>gdppc<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>neighbor name<span class="token operator">=</span><span class="token string">&quot;Costa Rica&quot;</span> direction<span class="token operator">=</span><span class="token string">&quot;W&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>neighbor name<span class="token operator">=</span><span class="token string">&quot;Colombia&quot;</span> direction<span class="token operator">=</span><span class="token string">&quot;E&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>country<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>data<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="增删改查操作"><a href="#增删改查操作" class="header-anchor">#</a> 增删改查操作</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 增删改查</span>
<span class="token comment"># 在进行操作之前，都应该进行这两步：</span>

<span class="token comment"># import xml.etree.ElementTree as ET</span>
<span class="token comment"># tree = ET.parse('a.xml')  # 形成树形结构</span>
<span class="token comment"># root = tree.getroot()  # 得到树的根系</span>
<span class="token comment"># print(root)</span>
<span class="token comment"># 循环打印：</span>
<span class="token comment"># for i in root:</span>
<span class="token comment">#     print(i)</span>
<span class="token comment"># &lt;Element 'country' at 0x00000196B51191D8&gt;</span>
<span class="token comment"># &lt;Element 'country' at 0x00000196B5124B88&gt;</span>
<span class="token comment"># &lt;Element 'country' at 0x00000196B5124D18&gt;</span>

<span class="token comment"># 所有的增删改查都是基于这个root根系去操作</span>

<span class="token comment"># 查：</span>
<span class="token comment"># 1,全文搜索 year 将所有的year标签全部找</span>
<span class="token comment"># print(root.iter('year'))</span>
<span class="token comment"># print([i for i in root.iter('year')])</span>
<span class="token comment"># 2,只找第一个，找到就返回</span>
<span class="token comment"># print(root.find('country'))</span>
<span class="token comment"># 3,在root的子节点找，找所有的</span>
<span class="token comment"># print(root.findall('country'))</span>

<span class="token comment"># 练习</span>
<span class="token comment"># 找到标签也可以找到标签相应的内容：tag,attrib,text</span>

<span class="token comment"># 1,找所有的rank标签，以及 attrib 和 text (这里利用列表推导式比较方便)</span>
<span class="token comment"># print([i for i in root.iter('rank')])</span>
<span class="token comment"># [&lt;Element 'rank' at 0x000001367D0D49F8&gt;, &lt;Element 'rank' at 0x000001367D0D4BD8&gt;, &lt;Element 'rank' at 0x000001367D0D4D68&gt;]</span>
<span class="token comment"># print([i.attrib for i in root.iter('rank')])</span>
<span class="token comment"># [{'updated': 'yes'}, {'updated': 'yes'}, {'updated': 'yes'}]</span>
<span class="token comment"># print([i.text for i in root.iter('rank')])  # ['2', '5', '69']</span>

<span class="token comment"># 2,找到第二个country的 neighbor标签以及他的属性</span>
<span class="token comment"># print([tag for tag in root.findall('country')][1].find('neighbor').attrib)</span>
<span class="token comment"># {'direction': 'N', 'name': 'Malaysia'}</span>


<span class="token comment"># 增 append</span>
<span class="token comment"># import xml.etree.ElementTree as ET</span>
<span class="token comment"># tree = ET.parse('a.xml')  # 形成树形结构</span>
<span class="token comment"># root = tree.getroot()  # 得到树的根系</span>

<span class="token comment"># 给 year 大于2010年的所有标签下面添加一个month标签，属性为name:month 内容为30days</span>

<span class="token comment"># for country in root.findall('country'):</span>
<span class="token comment">#     for year in country.findall('year'):</span>
<span class="token comment">#         if int(year.text) &gt; 2010:</span>
<span class="token comment">#             month = ET.Element('month')</span>
<span class="token comment">#             month.text = '30days'</span>
<span class="token comment">#             month.attrib = {'name': 'month'}</span>
<span class="token comment">#             country.append(month)</span>
<span class="token comment"># tree.write('b.xml')</span>

<span class="token comment">#改</span>

<span class="token comment"># import xml.etree.ElementTree as ET</span>
<span class="token comment"># tree = ET.parse('a.xml')  # 形成树形结构</span>
<span class="token comment"># root = tree.getroot()  # 得到树的根系</span>
<span class="token comment"># 对所有的year属性以及值进行修改</span>
<span class="token comment"># for node in root.iter('year'):</span>
<span class="token comment">#     new_year=int(node.text)+1</span>
<span class="token comment">#     node.text=str(new_year)</span>
<span class="token comment">#     node.set('updated','yes')</span>
<span class="token comment">#     node.set('version','1.0')</span>
<span class="token comment"># tree.write('test.xml')</span>


<span class="token comment"># 删</span>
<span class="token comment"># import xml.etree.ElementTree as ET</span>
<span class="token comment"># tree = ET.parse('a.xml')  # 形成树形结构</span>
<span class="token comment"># root = tree.getroot()  # 得到树的根系</span>
<span class="token comment">#</span>
<span class="token comment"># # 将 rank值大于50的country标签删除</span>
<span class="token comment"># for country in root.findall('country'):</span>
<span class="token comment">#    rank = int(country.find('rank').text)</span>
<span class="token comment">#    if rank &gt; 50:</span>
<span class="token comment">#      root.remove(country)</span>
<span class="token comment">#</span>
<span class="token comment"># tree.write('output.xml')</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br></div></div><h3 id="自己创建xml"><a href="#自己创建xml" class="header-anchor">#</a> 自己创建xml</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> xml<span class="token punctuation">.</span>etree<span class="token punctuation">.</span>ElementTree <span class="token keyword">as</span> ET
 
 
new_xml <span class="token operator">=</span> ET<span class="token punctuation">.</span>Element<span class="token punctuation">(</span><span class="token string">&quot;namelist&quot;</span><span class="token punctuation">)</span>
name <span class="token operator">=</span> ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>new_xml<span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>attrib<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;enrolled&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;yes&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
age <span class="token operator">=</span> ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span>attrib<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;checked&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;no&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
sex <span class="token operator">=</span> ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token string">&quot;sex&quot;</span><span class="token punctuation">)</span>
sex<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'33'</span>
name2 <span class="token operator">=</span> ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>new_xml<span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>attrib<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;enrolled&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;no&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
age <span class="token operator">=</span> ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>name2<span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span>
age<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'19'</span>
 
et <span class="token operator">=</span> ET<span class="token punctuation">.</span>ElementTree<span class="token punctuation">(</span>new_xml<span class="token punctuation">)</span> <span class="token comment">#生成文档对象</span>
et<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">&quot;test.xml&quot;</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">,</span>xml_declaration<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
 
ET<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>new_xml<span class="token punctuation">)</span> <span class="token comment">#打印生成的格式</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="subprocess"><a href="#subprocess" class="header-anchor">#</a> subprocess</h2> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span>  subprocess
 
<span class="token triple-quoted-string string">'''
sh-3.2# ls /Users/egon/Desktop |grep txt$
mysql.txt
tt.txt
事物.txt
'''</span>

res1<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span><span class="token string">'ls /Users/jieli/Desktop'</span><span class="token punctuation">,</span>shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">)</span>
res<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span><span class="token string">'grep txt$'</span><span class="token punctuation">,</span>shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>stdin<span class="token operator">=</span>res1<span class="token punctuation">.</span>stdoutstdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#等同于上面,但是上面的优势在于,一个数据流可以和另外一个数据流交互,可以通过爬虫得到结果然后交给grep</span>
res1<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span><span class="token string">'ls /Users/jieli/Desktop |grep txt$'</span><span class="token punctuation">,</span>shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res1<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#windows下:</span>
<span class="token comment"># dir | findstr 'test*'</span>
<span class="token comment"># dir | findstr 'txt$'</span>


<span class="token keyword">import</span> subprocess
res1<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span><span class="token string">r'dir C:\Users\Administrator\PycharmProjects\test\函数备课'</span><span class="token punctuation">,</span>shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">)</span>
res<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span><span class="token string">'findstr test*'</span><span class="token punctuation">,</span>shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>stdin<span class="token operator">=</span>res1<span class="token punctuation">.</span>stdout<span class="token punctuation">,</span>stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#subprocess使用当前系统默认编码，得到结果为bytes类型，在windows下需要用gbk解码</span>

<span class="token comment">#举例说明：</span>
<span class="token keyword">import</span> subprocess

obj <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span><span class="token string">'dir'</span><span class="token punctuation">,</span>
                 shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
                 stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>
                 stderr<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>
                       
                <span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 正确命令</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>stderr<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 错误命令</span>

<span class="token comment"># shell: 命令解释器，相当于调用cmd 执行指定的命令。</span>
<span class="token comment"># stdout:正确结果丢到管道中。</span>
<span class="token comment"># stderr:错了丢到另一个管道中。</span>
<span class="token comment"># windows操作系统的默认编码是gbk编码。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/Myblog/pages/9264de/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">自定义模块</div></a> <a href="/Myblog/pages/c03c2d/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">包</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Myblog/pages/9264de/" class="prev">自定义模块</a></span> <span class="next"><a href="/Myblog/pages/c03c2d/">包</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/Myblog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/Myblog/pages/b00a82/"><div>
            table上的lable加必填号
            <!----></div></a> <span class="date">07-09</span></dt></dl><dl><dd>02</dd> <dt><a href="/Myblog/pages/ed235f/"><div>
            vue使用tips
            <!----></div></a> <span class="date">07-09</span></dt></dl><dl><dd>03</dd> <dt><a href="/Myblog/pages/dc227d/"><div>
            PersonalPlay
            <!----></div></a> <span class="date">07-08</span></dt></dl> <dl><dd></dd> <dt><a href="/Myblog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/Myblog/assets/js/app.b4d326d4.js" defer></script><script src="/Myblog/assets/js/2.65a1fad6.js" defer></script><script src="/Myblog/assets/js/29.bf7a886c.js" defer></script>
  </body>
</html>
