---
title: ReactåŸºç¡€
date: 2023-12-19 13:51:49
permalink: /pages/e04516/
author:
  name: Riverside Joy
  link: https://github.com/RiversideJoy
categories:
  - å‰ç«¯
  - Reactæ¡†æ¶
tags:
  - 
---
## åˆ›å»ºé¡¹ç›®

### å®‰è£…create-react-app

```sh
$ npm install -g create-react-app
```

###  åˆ›å»ºé¡¹ç›®

```sh
$ create-react-app your-app #æ³¨æ„å‘½åæ–¹å¼
```

> tips:
>
> - é»˜è®¤åˆ›å»ºçš„æ˜¯jsé¡¹ç›®ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨tsé¡¹ç›®ï¼Œå¯ä»¥åŠ ä¸Štemplate
>
>   ```sh
>   $ create-react-app your-app -template typescript
>   ```
>
> - å¦‚æœä¸æƒ³å…¨å±€å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨npx
>
>   ```sh
>   $ npx create-react-app your-app	ä¹Ÿå¯ä»¥å®ç°ç›¸åŒçš„æ•ˆæœ
>   ```
>
>   
>
> 

## ä½¿ç”¨yarn

- å®‰è£… npm install -g yarn
- æŸ¥çœ‹ç‰ˆæœ¬ yarn --version
- æŸ¥çœ‹é•œåƒ yarn config get registry
- è®¾ç½®æ·˜å®æº yarn config set registry https://registry.npm.taobao.org -g
- å®‰è£…ä¾èµ– yarn add åŒ…å

## Reactçš„ç‰¹ç‚¹å’Œä¼˜åŠ¿

**(1) è™šæ‹ŸDOM**

æˆ‘ä»¬ä»¥å‰æ“ä½œdomçš„æ–¹å¼æ˜¯é€šè¿‡document.getElementById()çš„æ–¹å¼ï¼Œè¿™æ ·çš„è¿‡ç¨‹å®é™…ä¸Šæ˜¯å…ˆå»è¯»å–htmlçš„domç»“æ„ï¼Œå°†ç»“æ„è½¬æ¢æˆå˜é‡ï¼Œå†è¿›è¡Œæ“ä½œã€‚è€Œreactjså®šä¹‰äº†ä¸€å¥—å˜é‡å½¢å¼çš„domæ¨¡å‹ï¼Œä¸€åˆ‡æ“ä½œå’Œæ¢ç®—ç›´æ¥åœ¨å˜é‡ä¸­ï¼Œè¿™æ ·å‡å°‘äº†æ“ä½œçœŸå®domï¼Œæ€§èƒ½çœŸå®ç›¸å½“çš„é«˜ï¼Œå’Œä¸»æµMVCæ¡†æ¶æœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œå¹¶ä¸å’Œdomæ‰“äº¤é“

**(2) ç»„ä»¶ç³»ç»Ÿ**

reactæœ€æ ¸å¿ƒçš„æ€æƒ³æ˜¯å°†é¡µé¢ä¸­ä»»ä½•ä¸€ä¸ªåŒºåŸŸæˆ–è€…å…ƒç´ éƒ½å¯ä»¥çœ‹åšä¸€ä¸ªç»„ä»¶ component

é‚£ä¹ˆä»€ä¹ˆæ˜¯ç»„ä»¶å‘¢ï¼Ÿ

ç»„ä»¶æŒ‡çš„å°±æ˜¯åŒæ—¶åŒ…å«äº†htmlã€cssã€jsã€imageå…ƒç´ çš„èšåˆä½“

ä½¿ç”¨reactå¼€å‘çš„æ ¸å¿ƒå°±æ˜¯å°†é¡µé¢æ‹†åˆ†æˆè‹¥å¹²ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”reactä¸€ä¸ªç»„ä»¶ä¸­åŒæ—¶è€¦åˆäº†cssã€jsã€imageï¼Œè¿™ç§æ¨¡å¼æ•´ä¸ªé¢ è¦†äº†è¿‡å»çš„ä¼ ç»Ÿçš„æ–¹å¼

**(3) å•å‘æ•°æ®æµ**

å…¶å®reactjsçš„æ ¸å¿ƒå†…å®¹å°±æ˜¯æ•°æ®ç»‘å®šï¼Œæ‰€è°“æ•°æ®ç»‘å®šæŒ‡çš„æ˜¯åªè¦å°†ä¸€äº›æœåŠ¡ç«¯çš„æ•°æ®å’Œå‰ç«¯é¡µé¢ç»‘å®šå¥½ï¼Œå¼€å‘è€…åªå…³æ³¨å®ç°ä¸šåŠ¡å°±è¡Œäº†

**(4) JSX  è¯­æ³•**

åœ¨vueä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨renderå‡½æ•°æ¥æ„å»ºç»„ä»¶çš„domç»“æ„æ€§èƒ½è¾ƒé«˜ï¼Œå› ä¸ºçœå»äº†æŸ¥æ‰¾å’Œç¼–è¯‘æ¨¡æ¿çš„è¿‡ç¨‹ï¼Œä½†æ˜¯åœ¨renderä¸­åˆ©ç”¨createElementåˆ›å»ºç»“æ„çš„æ—¶å€™ä»£ç å¯è¯»æ€§è¾ƒä½ï¼Œè¾ƒä¸ºå¤æ‚ï¼Œæ­¤æ—¶å¯ä»¥åˆ©ç”¨jsxè¯­æ³•æ¥åœ¨renderä¸­åˆ›å»ºdomï¼Œè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å‰ææ˜¯éœ€è¦ä½¿ç”¨å·¥å…·æ¥ç¼–è¯‘jsx

## diffç®—æ³•

1. ä»€ä¹ˆæ˜¯diffç®—æ³•

   diffç®—æ³•æ˜¯`è°ƒå’Œçš„å…·ä½“å®ç°`

2. ä»€ä¹ˆæ˜¯è°ƒå’Œ

   å°†Virtual Dom æ ‘è½¬æ¢æˆactual DOMæ ‘çš„`æœ€å°‘æ“ä½œçš„è¿‡ç¨‹`ï¼Œç§°ä¸ºè°ƒå’Œ

3. diffç®—æ³•çš„ä½œç”¨

   - è®¡ç®—å‡ºVirtual DOMä¸­çœŸæ­£å˜åŒ–çš„éƒ¨åˆ†
   - å¹¶åªå¯¹è¯¥éƒ¨åˆ†è¿›è¡ŒåŸç”ŸDOMæ“ä½œï¼Œè€Œéé‡æ–°æ¸²æŸ“æ•´ä¸ªé¡µé¢

4. diffç­–ç•¥

   1. åŒçº§æ¯”è¾ƒ

      Web UI ä¸­DOMèŠ‚ç‚¹è·¨å±‚çº§çš„ç§»åŠ¨æ“ä½œç‰¹åˆ«å°‘ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡

   2. ç»„ä»¶ç­–ç•¥

      - æ‹¥æœ‰ç›¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶ï¼Œç”Ÿæˆç›¸ä¼¼çš„æ ‘å½¢ç»“æ„
      - æ‹¥æœ‰ä¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶ï¼Œç”Ÿæˆä¸åŒçš„æ ‘å½¢ç»“æ„

   3. keyæ¯”è¾ƒ

      å¯¹äºåŒä¸€å±‚çº§çš„ä¸€ç»„å­èŠ‚ç‚¹ï¼Œé€šè¿‡å”¯ä¸€idåŒºåˆ†

5. ä¸Šè¿°ç»„ä»¶ç­–ç•¥åˆ†ç±»

   1. åŒä¸€ç±»å‹çš„ä¸¤ä¸ªç»„ä»¶ï¼ŒæŒ‰åŸç­–ç•¥(å±‚çº§æ¯”è¾ƒ)ç»§ç»­æ¯”è¾ƒVirtual DOMæ ‘å³å¯
   2. åŒä¸€ç±»å‹çš„ä¸¤ä¸ªç»„ä»¶ï¼Œç»„ä»¶Aå˜åŒ–ä¸ºç»„ä»¶Bæ—¶ï¼Œå¯èƒ½Virtual Domæ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡shouldComponentUpdate()æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦ æ›´æ–°
   3. ä¸åŒç±»å‹çš„ç»„ä»¶ï¼Œå°†ä¸€ä¸ª(å°†è¢«æ”¹å˜çš„)ç»„ä»¶åˆ¤æ–­ä¸ºdirty component(è„ç»„ä»¶)ï¼Œä»è€Œæ›¿æ¢æ•´ä¸ªç»„ä»¶çš„æ‰€æœ‰èŠ‚ç‚¹


## ç®€å•çš„reactä»£ç 

```tsx
// ä» react çš„åŒ…å½“ä¸­å¼•å…¥äº† Reactã€‚åªè¦ä½ è¦å†™ React.js ç»„ä»¶å°±å¿…é¡»å¼•å…¥React, å› ä¸ºreacté‡Œæœ‰ä¸€ç§è¯­æ³•å«JSXï¼Œç¨åä¼šè®²åˆ°JSXï¼Œè¦å†™JSXï¼Œå°±å¿…é¡»å¼•å…¥React
import React from 'react'
// ReactDOM å¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠ React ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šå»ï¼Œæ²¡æœ‰å…¶å®ƒçš„ä½œç”¨äº†ã€‚å®ƒæ˜¯ä» react-dom ä¸­å¼•å…¥çš„ï¼Œè€Œä¸æ˜¯ä» react å¼•å…¥ã€‚
import ReactDOM from 'react-dom'

// ReactDOMé‡Œæœ‰ä¸€ä¸ªrenderæ–¹æ³•ï¼ŒåŠŸèƒ½å°±æ˜¯æŠŠç»„ä»¶æ¸²æŸ“å¹¶ä¸”æ„é€  DOM æ ‘ï¼Œç„¶åæ’å…¥åˆ°é¡µé¢ä¸ŠæŸä¸ªç‰¹å®šçš„å…ƒç´ ä¸Š
ReactDOM.render(
// è¿™é‡Œå°±æ¯”è¾ƒå¥‡æ€ªäº†ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œçœ‹èµ·æ¥åƒæ˜¯çº¯ HTML ä»£ç å†™åœ¨ JavaScript ä»£ç é‡Œé¢ã€‚è¯­æ³•é”™è¯¯å—ï¼Ÿè¿™å¹¶ä¸æ˜¯åˆæ³•çš„ JavaScript ä»£ç , â€œåœ¨ JavaScript å†™çš„æ ‡ç­¾çš„â€è¯­æ³•å« JSX- JavaScript XMLã€‚
  <h1>æ¬¢è¿è¿›å…¥Reactçš„ä¸–ç•Œ</h1>,
// æ¸²æŸ“åˆ°å“ªé‡Œ
  document.getElementById('root')
)
```

## reactå…ƒç´ ä¸ç»„ä»¶

> react-domåœ¨æ•´ä¸ªé¡¹ç›®ä¸­ï¼Œåªéœ€è¦åœ¨index.tsxä¸­å¼•å…¥ä¸€æ¬¡å°±å¤Ÿäº†ï¼Œå…¶ä»–åœ°æ–¹ä¸éœ€è¦å¼•å…¥

### åŒºåˆ«

åœ¨reactä¸­ï¼Œå¤§å°å†™æ•æ„Ÿï¼Œå¤§å†™çš„ä¸ºç»„ä»¶åç§°ï¼Œå°å†™çš„ä¸ºæ ‡ç­¾å…ƒç´ 

1. ç»„ä»¶

   ```tsx
   import React from 'react';
   import ReactDOM from 'react-dom';
   const app = <div>hello react</div> // æ³¨æ„è¿™é‡Œçš„å®šä¹‰æ–¹å¼(ä»¥çº¯htmlå®šä¹‰ï¼Œæ— æ³•ä½¿ç”¨å‡½æ•°å®šä¹‰)
   ReactDOM.render(
     app,
     document.getElementById('root')
   );
   ```

2. å…ƒç´ 

   ```tsx
   import React from 'react';
   import ReactDOM from 'react-dom';
   const App = () => <div>hello react</div> // æ³¨æ„è¿™é‡Œçš„å®šä¹‰æ–¹å¼(ä»¥å‡½æ•°çš„å½¢å¼å®šä¹‰)
   ReactDOM.render(
     <App />,
     document.getElementById('root')
   );
   ```


### ç»„ä»¶ä¼ å‚

#### å‡½æ•°ç»„ä»¶ä¼ å‚

> JSXä¸­ï¼Œå˜é‡ä½¿ç”¨å¤§æ‹¬å·è¿›è¡Œè¯†åˆ«ã€ä½¿ç”¨
>
> åœ¨ { } å¯ä»¥ç›´æ¥å†™jsè¯­å¥

##### ä¼ å•ä¸ªå‚æ•°

å¯ä»¥ç›´æ¥ä½¿ç”¨propæ¥æ”¶

```tsx
import ReactDOM from 'react-dom';
const app =(prop: any) => <div>hello react!{prop}</div>
ReactDOM.render(
  app('test'),
  document.getElementById('root')
);
```

##### ä¼ å¤šä¸ªå‚æ•°

å¯ä»¥ä½¿ç”¨å¯¹è±¡æˆ–è€…æ•°æ®ç­‰å¤æ‚ç±»å‹ä¼ å‚

```tsx
import React from 'react';
import ReactDOM from 'react-dom';
const app =(prop: any) => <div>my name is {prop.name}, I'm {prop.age} age</div>
ReactDOM.render(
  app({name: 'riverside joy', age: 8}), // ä½¿ç”¨å¯¹è±¡ä¼ å‚
  document.getElementById('root')
);
```

##### ä½¿ç”¨ç»„ä»¶å½¢å¼ä¼ å‚

```tsx
import React from 'react';
import ReactDOM from 'react-dom';
const App =(prop: any) => <div>my name is {prop.name}</div>
ReactDOM.render(
  <App name="reverside joy"/>, // ä½¿ç”¨å¯¹è±¡ä¼ å‚
  document.getElementById('root')
);
```

#### ç±»ç»„ä»¶ä¼ å‚

> ç±»ç»„ä»¶ä¸­ï¼Œ**`å¿…é¡»è¦æœ‰renderæ–¹æ³•`**ï¼ŒåŒæ—¶åˆæ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°

```tsx
import React from 'react';
import ReactDOM from 'react-dom';
// 2.ä½¿ç”¨interfaceå®Œå…¨å£°æ˜å®šä¹‰å±æ€§ç±»å‹
interface MyProps {
	name:string; // å¿…è¦å±æ€§
	age ?: string; //å¯é€‰å±æ€§
	readonly id ?: string; // åªè¯»å±æ€§
}
class App extends React.Component<MyProps> {
  render() {
    return (<div>my name is {this.props.name} </div>)
  }
}
ReactDOM.render(
  <App name="test"/>, // ä½¿ç”¨å¯¹è±¡ä¼ å‚
  document.getElementById('root')
);
```

:::tip

å‡½æ•°ç»„ä»¶å–å€¼ï¼Œé€šè¿‡prop.å±æ€§å    çš„æ–¹å¼

ç±»ç»„ä»¶å–å€¼ï¼Œé€šè¿‡this.props.å±æ€§å    çš„æ–¹å¼å–å€¼

:::

### ç»„ä»¶åˆ†æ–‡ä»¶

#### ç±»ç»„ä»¶å½¢å¼

1. ç»„ä»¶å†™æ³•

   1. å…ˆå¼•å…¥react
   2. ç„¶åç±»ç»„ä»¶çš„é€šç”¨å†™æ³•
   3. `æœ€åè¦ä½¿ç”¨export defaultæš´éœ²å‡ºå»`

   ```tsx
   import React from "react";
   class App extends React.Component {
     render() {
       return(<div>è¿™æ˜¯ç»„ä»¶</div>)
     }
   }
   export default App
   ```

2. å…¥å£æ–‡ä»¶å†™æ³•

   ```tsx
   // index.tsx
   import ReactDOM from 'react-dom';
   import App from './01-get-start/component'; // å¼•å…¥ç»„ä»¶
   ReactDOM.render(
     <App />, // ä½¿ç”¨å¯¹è±¡ä¼ å‚
     document.getElementById('root')
   );
   ```

#### å‡½æ•°ç»„ä»¶å½¢å¼

æ­¤å¤„å°†ä¸¤ä¸ªç»„ä»¶å†™åœ¨ä¸€èµ·äº†ï¼Œåˆ†åˆ«æ˜¯Headerç»„ä»¶å’ŒAppç»„ä»¶

Appç»„ä»¶åˆä½œä¸ºå…¥å£æ–‡ä»¶index.tsxçš„ç»„ä»¶

```tsx
import React from "react";
const Header = () => {
    return(<header>æ˜¯å¤´éƒ¨</header>)
}
class App extends React.Component {
  render() {
    return(
      <Header/ >
    )
  }
}
export default App
```



#### ç»„ä»¶åµŒå¥—

1. æœ€é‡Œé¢çš„ç»„ä»¶

   ```tsx
   import React, {Component} from "react";
   class Header extends Component{
     render() {
       return(<header>å¤´éƒ¨</header>)
     }
   }
   export default Header
   ```

2. å€’æ•°ç¬¬äºŒå±‚ç»„ä»¶

   ```tsx
   import React from "react";
   import Header from './header'
   class App extends React.Component {
     render() {
       return(<Header />)
     }
   }
   export default App
   ```

3. æœ€å¤–å±‚indexå†™æ³•

   ```tsx
   import React from 'react';
   import ReactDOM from 'react-dom';
   import App from './01-get-start/component';
   ReactDOM.render(
     <App />, // ä½¿ç”¨å¯¹è±¡ä¼ å‚
     document.getElementById('root')
   );
   ```

### returnå‡½æ•°ä¸­åŒ…å«å¤šä¸ªdom

:::warning

ç»„ä»¶æ ¹å…ƒç´ åªå…è®¸æœ‰ä¸€ä¸ªï¼Œå¦‚æœéœ€è¦ä½¿ç”¨å¤šä¸ªï¼Œå¯ä»¥åœ¨å¤–å±‚åŒ…è£¹<></>ï¼Œæˆ–è€…ä½¿ç”¨`<Fragment></Fragment>`

Fragmentæ ‡ç­¾éœ€è¦ä»reactä¸­è§£æ„å‡ºæ¥

:::

1. ä½¿ç”¨Fragmentæ ‡ç­¾

   > Tips: Fragmentæ ‡ç­¾ï¼Œè¦ä»reactä¸­è§£æ„å‡ºæ¥

   ```tsx
   import React, {Component, Fragment} from "react";
   class App extends React.Component {
     render() {
       return(
         <Fragment>
           <Header/ >
           <Main />
         </Fragment>
       )
     }
   }
   ```

2. ä½¿ç”¨ç©ºæ ‡ç­¾

   ```tsx
   class App extends React.Component {
     render() {
       return(
         <>
           <Header/ >
           <Main />
         </>
       )
     }
   }
   ```

## Domçš„æ ·å¼

> å¦‚æœä½¿ç”¨typescripté¡¹ç›®ï¼Œå¼•å…¥cssæ–‡ä»¶ï¼Œå¯èƒ½å‡ºç°æ‰¾ä¸åˆ°cssæ–‡ä»¶çš„æƒ…å†µ
>
> è§£å†³æ–¹æ¡ˆï¼š
>
> 1. åˆ›å»º `globals.d.ts `
>
>    ```ts
>    declare module '*.css'
>    ```
>
> 2. æ‰“å¼€tsconfig.json
>
>    ```json
>    "include": ["./**/*.ts"],
>    "exclude":["node_modules/**/*"]
>    ```
>

> æ€»ç»“ï¼š
>
> 1. è¡Œå†…æ ·å¼ï¼Œä½¿ç”¨åŒå¤§æ‹¬å·
> 2. classNameå…³é”®å­ï¼Œä½¿ç”¨csså®šä¹‰çš„å­—ç¬¦ä¸²ç±»å
> 3. cssnamesåŒ…ï¼Œä½¿ç”¨å•å¤§æ‹¬å· + åŒ…å’Œæ ·å¼ç»‘å®šçš„å®ä½“åç§°

### è¡Œå†…æ ·å¼

1. è¡Œå†…æ ·å¼è¦æ±‚CSS`å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡`
2. reactå¯¹äºjsçš„è¯†åˆ«æ˜¯ä½¿ç”¨å¤§æ‹¬å·
3. å¯¹äºå¤šå•è¯çš„CSSå±æ€§ï¼Œè¦`ä½¿ç”¨å°é©¼å³°çš„å†™æ³•`ï¼Œå¦‚fontSize

æ‰€ä»¥`æœ€å¤–å±‚å¤§æ‹¬å·æ˜¯reactå¯¹jsçš„è¯†åˆ«`ï¼Œ`é‡Œå±‚çš„å¤§æ‹¬å·æ˜¯reactè¦æ±‚çš„å¯¹è±¡`

```tsx
const App = () => {
  return (
    <div style={{color: 'red', fontSize: '50px'}}>æµ‹è¯•é¡µé¢</div>
  )
}
export default App
```

```tsx
const styleObj = {
    fontSize: '16px'
}
const redObj = {
    color: 'red'
}
const App = () => {
  return (
    <div style={1 > 2 ? styleObj : redObj}>æµ‹è¯•é¡µé¢</div>
  )
}
export default App
```

### ä½¿ç”¨classNameå…³é”®å­—

1. step1: å®šä¹‰cssæ ·å¼

   ```css
   .fontStyle {
     color: green;
     font-size: 16px;
   }
   ```

2. step2: å¼•å…¥cssæ–‡ä»¶å¹¶`ä½¿ç”¨classNameå…³é”®å­—`

   ```tsx
   import './02-test.css'
   const App = () => {
     return (
       <div className="fontStyle">æµ‹è¯•é¡µé¢</div>
     )
   }
   export default App
   ```

### ä¸åŒæ¡ä»¶æ˜¾ç¤ºä¸åŒæ ·å¼ï¼šclassnamesåŒ…

æœ‰æ—¶å€™éœ€è¦æ ¹æ®ä¸åŒçš„æ¡ä»¶æ·»åŠ ä¸åŒçš„æ ·å¼ï¼Œæ¯”å¦‚ï¼šå®ŒæˆçŠ¶æ€ï¼Œå®Œæˆæ˜¯ç»¿è‰²ï¼Œæœªå®Œæˆæ˜¯çº¢è‰²ã€‚é‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨[classnames](<https://www.npmjs.com/package/classnames>)è¿™ä¸ªåŒ…

1. å®‰è£…

   ```sh
   cnpm install -D classnames
   ```

2. ä½¿ç”¨

   1. å®šä¹‰cssæ–‡ä»¶

      ```css
      .fontStyle {
        color: red;
        font-size: 16px;
      }
      ```

   2. å¼•å…¥classNames(ç”¨äºæ ¹æ®æ¡ä»¶æ˜¾ç¤ºcssæ ·å¼)å’Œstyle

   3. å¼•å…¥å®šä¹‰å¥½çš„cssæ–‡ä»¶ï¼Œå¹¶è®¾ç½®åˆ«å

   4. 3.å°†cssæ ·å¼è¿›è¡Œç»‘å®š

   ```tsx
   // 1.å¼•å…¥npmåŒ…çš„å›ºå®šå†™æ³•
   import classNames from 'classnames/bind';
   // 2.å¼•å…¥è‡ªå·±å®šä¹‰çš„cssæ–‡ä»¶
   import styles from './02-test.css';
   const App = () => {
     // 3.å°†cssæ ·å¼è¿›è¡Œç»‘å®š
     let className = cx({
       // å·¦è¾¹çš„keyæ˜¯æ ·å¼ä¸­çš„ç±»åï¼Œvalueæ˜¯å˜é‡æˆ–è€…è¡¨è¾¾å¼
       fontStyle: false
     })
     return (
       <div className={className}>æµ‹è¯•é¡µé¢</div>
     )
   }
   export default App
   ```

### css  in js

ä»¥ç»„ä»¶çš„æ–¹å¼å»å†™css

styled-component æ˜¯é’ˆå¯¹Reactå†™çš„ä¸€å¥—css-in-jsæ¡†æ¶ï¼Œç®€å•æ¥è®²å°±æ˜¯åœ¨jsä¸­å†™cssã€‚[npmé“¾æ¥](<https://www.npmjs.com/package/styled-components>)

çˆ¶ç»„ä»¶

```tsx
import React, { Component } from 'react'
import { DivStyled } from './03-styled'
const App = () => {
  return (
    <DivStyled primary="100px">
      app3
    </DivStyled>
  )
}
export default App
```

æ ·å¼ç»„ä»¶

```tsx
import styled from 'styled-components'
// è¿™æ˜¯ä¸€ä¸ªç»„ä»¶
const DivStyled = styled.div`
  background: red;
  color: green;
  font-size:${ (props) => props.primary }
`
export { DivStyled }
```

## ç»„ä»¶çš„çŠ¶æ€(props)

`props`æ˜¯æ­£å¸¸æ˜¯å¤–éƒ¨ä¼ å…¥çš„ï¼Œç»„ä»¶å†…éƒ¨ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æ–¹å¼æ¥åˆå§‹åŒ–çš„è®¾ç½®ï¼Œ**å±æ€§ä¸èƒ½è¢«ç»„ä»¶è‡ªå·±æ›´æ”¹**ï¼Œä½†æ˜¯ä½ **å¯ä»¥é€šè¿‡çˆ¶ç»„ä»¶ä¸»åŠ¨é‡æ–°æ¸²æŸ“çš„æ–¹å¼æ¥ä¼ å…¥æ–°çš„** `props`

å±æ€§æ˜¯æè¿°æ€§è´¨ã€ç‰¹ç‚¹çš„ï¼Œç»„ä»¶è‡ªå·±ä¸èƒ½éšæ„æ›´æ”¹ã€‚

ä¹‹å‰çš„ç»„ä»¶ä»£ç é‡Œé¢æœ‰`props`çš„ç®€å•ä½¿ç”¨ï¼Œæ€»çš„æ¥è¯´ï¼Œåœ¨ä½¿ç”¨ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå‚æ•°æ”¾åœ¨æ ‡ç­¾çš„å±æ€§å½“ä¸­ï¼Œæ‰€æœ‰çš„å±æ€§éƒ½ä¼šä½œä¸ºç»„ä»¶ `props` å¯¹è±¡çš„é”®å€¼ã€‚é€šè¿‡ç®­å¤´å‡½æ•°åˆ›å»ºçš„ç»„ä»¶ï¼Œéœ€è¦é€šè¿‡å‡½æ•°çš„å‚æ•°æ¥æ¥æ”¶`props`:

```jsx
import React, { Component, Fragment } from 'react'
import ReactDOM from 'react-dom'

class Title extends Component {
  render () {
    return (
  		<h1>æ¬¢è¿è¿›å…¥{this.props.name}çš„ä¸–ç•Œ</h1>
  	)
  }
}

const Content = (props) => {
  return (
    <p>{props.name}æ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</p>
  )
}

class App extends Component {
  render () {
    return (
  		<Fragment>
      	<Title name="React" />
        <Content name="React.js" />
      </Fragment>
  	)
  }
}

ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

### è®¾ç½®ç»„ä»¶çš„é»˜è®¤props

ç±»ç»„ä»¶ï¼Œä½¿ç”¨static defaultPropsæ¥å®šä¹‰é»˜è®¤çš„props

1. staticå®šä¹‰çš„ï¼Œå°±ç®—æœ‰å­ç±»ç»§æ‰¿ï¼Œæ— æ³•ç»§æ‰¿staticä¿®é¥°çš„ï¼Œæ˜¯å±äºè¯¥ç±»ç§æœ‰çš„
2. staticå®šä¹‰çš„ä¸œè¥¿ï¼Œæ˜¯ç›´æ¥ç»‘å®šåœ¨è¿™ä¸ªç±»ä¸Šçš„

å‡½æ•°ç»„ä»¶çš„é»˜è®¤å€¼ï¼Œç›´æ¥æŒ‚è½½åœ¨å‡½æ•°ä¸‹

å‡½æ•°ç»„ä»¶å.defaultProps = {  }çš„æ–¹å¼å®šä¹‰

```jsx
import React, { Component, Fragment } from 'react'
import ReactDOM from 'react-dom'

class Title extends Component {
  // ä½¿ç”¨ç±»åˆ›å»ºçš„ç»„ä»¶ï¼Œç›´æ¥åœ¨è¿™é‡Œå†™staticæ–¹æ³•ï¼Œåˆ›å»ºdefaultProps
  static defaultProps = {
    name: 'React'
  }
  render () {
    return (
  		<h1>æ¬¢è¿è¿›å…¥{this.props.name}çš„ä¸–ç•Œ</h1>
  	)
  }
}

const Content = (props) => {
  return (
    <p>{props.name}æ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</p>
  )
}

// ä½¿ç”¨ç®­å¤´å‡½æ•°åˆ›å»ºçš„ç»„ä»¶ï¼Œéœ€è¦åœ¨è¿™ä¸ªç»„ä»¶ä¸Šç›´æ¥å†™defaultPropså±æ€§
Content.defaultProps = {
  name: 'React.js'
}

class App extends Component {
  render () {
    return (
  		<Fragment>
        {/* ç”±äºè®¾ç½®äº†defaultPropsï¼Œ ä¸ä¼ propsä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼Œå¦‚æœä¼ é€’äº†å°±ä¼šè¦†ç›–defaultPropsçš„å€¼ */}
      	<Title />
        <Content />
      </Fragment>
  	)
  }
}

ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

### props.children

**ç›¸å½“äºvueé‡Œé¢çš„æ’æ§½**

æˆ‘ä»¬çŸ¥é“ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥åµŒå¥—ã€‚è¦åœ¨è‡ªå®šä¹‰ç»„ä»¶çš„ä½¿ç”¨åµŒå¥—ç»“æ„ï¼Œå°±éœ€è¦ä½¿ç”¨ `props.children` ã€‚åœ¨å®é™…çš„å·¥ä½œå½“ä¸­ï¼Œæˆ‘ä»¬å‡ ä¹æ¯å¤©éƒ½éœ€è¦ç”¨è¿™ç§æ–¹å¼æ¥ç¼–å†™ç»„ä»¶ã€‚

**ä½¿ç”¨this.props.childrenï¼Œå¯ä»¥å¸¦å‡ºå¼•ç”¨ç»„ä»¶æ—¶ï¼ŒåŒæ ‡ç­¾é‡Œé¢çš„å†…å®¹**

```jsx
import React, { Component, Fragment } from 'react'
import ReactDOM from 'react-dom'

class Title extends Component {
  render () {
    return (
  		<h1>æ¬¢è¿è¿›å…¥{this.props.children}çš„ä¸–ç•Œ</h1>
  	)
  }
}

const Content = (props) => {
  return (
    <p>{props.children}</p>
  )
}

class App extends Component {
  render () {
    return (
  		<Fragment>
      	<Title>React</Title>
        <Content><i>React.js</i>æ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</Content>
      </Fragment>
  	)
  }
}

ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

### å…·åæ’æ§½

```jsx
import React, { Component, Fragment } from 'react'
import ReactDOM from 'react-dom'

const Content = (props) => {
  return (
    <p>{props.children.name1}</p>
    <h2>ç»„ä»¶å…¶ä»–å†…å®¹</h2>
    <p>{props.children.name2}</p>
    <p>{props.children.name3}</p>
  )
}

class App extends Component {
  render () {
    return (
  	  <Fragment>
        <Content>
            {{
                name1: <div>ç¬¬ä¸€ä¸ªæ’æ§½</div>,
                name2: <div>ç¬¬äºŒä¸ªæ’æ§½</div>,
                //å¦‚æœå±æ€§å€¼æœ‰å¤šä¸ªæ ‡ç­¾ï¼Œå¯ä»¥åŠ ä¸ªå°æ‹¬å·è¿›å»
                name3: (
                    <div>æ ‡ç­¾1</div>,
                    <div>æ ‡ç­¾2</div>
                )
            }}
        </Content> 
      </Fragment>
  	)
  }
}

ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

### ä½¿ç”¨prop-typesæ£€æŸ¥props

Reactå…¶å®æ˜¯ä¸ºäº†æ„å»ºå¤§å‹åº”ç”¨ç¨‹åºè€Œç”Ÿ, åœ¨ä¸€ä¸ªå¤§å‹åº”ç”¨ä¸­ï¼Œæ ¹æœ¬ä¸çŸ¥é“åˆ«äººä½¿ç”¨ä½ å†™çš„ç»„ä»¶çš„æ—¶å€™ä¼šä¼ å…¥ä»€ä¹ˆæ ·çš„å‚æ•°ï¼Œæœ‰å¯èƒ½ä¼šé€ æˆåº”ç”¨ç¨‹åºè¿è¡Œä¸äº†ï¼Œä½†æ˜¯ä¸æŠ¥é”™ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒReactæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œè®©å†™ç»„ä»¶çš„äººå¯ä»¥ç»™ç»„ä»¶çš„```props```è®¾å®šå‚æ•°æ£€æŸ¥ï¼Œéœ€è¦å®‰è£…å’Œä½¿ç”¨[prop-types](<https://www.npmjs.com/package/prop-types>):

1. å®‰è£…ä¾èµ–

   ```sh
   $ npm i prop-types -S
   ```

2. ä½¿ç”¨

   ```jsx
   import React from 'react'
   // è§£æ„å†™æ³•
   import { number } from 'prop-types'
   // æ•´ä½“å¼•å…¥å†™æ³•
   import PropTypes from 'prop-types'
   class Child extends React.Component {
       render() {
           return(
           	<div>child { this.props.title }</div>
           )
       }
   }
   Child.defaultProps = {
       title: 'React'
   }
   Child.propTypes = {
       // è§£æ„å†™æ³•
       title: number
       // å¦‚æœä¸ä½¿ç”¨ç»“æ„ï¼Œå¯ä»¥è¿™æ ·å†™
       num: PropTypes.numer
       
   }
   ```

## çŠ¶æ€(state)

çŠ¶æ€å°±æ˜¯ç»„ä»¶æè¿°æŸç§æ˜¾ç¤ºæƒ…å†µçš„æ•°æ®ï¼Œç”±ç»„ä»¶è‡ªå·±è®¾ç½®å’Œæ›´æ”¹ï¼Œä¹Ÿå°±æ˜¯è¯´ç”±ç»„ä»¶è‡ªå·±ç»´æŠ¤ï¼Œä½¿ç”¨çŠ¶æ€çš„ç›®çš„å°±æ˜¯ä¸ºäº†åœ¨ä¸åŒçš„çŠ¶æ€ä¸‹ä½¿ç»„ä»¶çš„æ˜¾ç¤ºä¸åŒ(è‡ªå·±ç®¡ç†)

### å®šä¹‰state

ç¬¬ä¸€ç§æ–¹å¼(æ¨è): å£°æ˜å¼çš„å®šä¹‰state

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  state = {
    name: 'React',
    isLiked: false
  }
  render () {
    return (
      <div>
        <h1>æ¬¢è¿æ¥åˆ°{this.state.name}çš„ä¸–ç•Œ</h1>
        <button>
          {
            this.state.isLiked ? 'â¤ï¸å–æ¶ˆ' : 'ğŸ–¤æ”¶è—'
          }
        </button>
      </div>
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

å¦ä¸€ç§æ–¹å¼: ä½¿ç”¨æ„é€ å‡½æ•°çš„æ„é€ å™¨construct å®šä¹‰state

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  constructor() {
    super()// è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰ç§æœ‰å˜é‡
    this.state = {
      name: 'React',
      isLiked: false
    }
  }
  render () {
    return (
  		<div>
        <h1>æ¬¢è¿æ¥åˆ°{this.state.name}çš„ä¸–ç•Œ</h1>
        <button>
          {
            this.state.isLiked ? 'â¤ï¸å–æ¶ˆ' : 'ğŸ–¤æ”¶è—'
          }
        </button>
      </div>
  	)
  }
}
ReactDOM.render(
  <App/>,
  document.getElementById('root')
)
```

`this.props`å’Œ`this.state`æ˜¯çº¯jså¯¹è±¡,åœ¨vueä¸­ï¼Œdataå±æ€§æ˜¯åˆ©ç”¨`Object.defineProperty`å¤„ç†è¿‡çš„ï¼Œæ›´æ”¹â€‹dataçš„æ•°æ®çš„æ—¶å€™ä¼šè§¦å‘æ•°æ®çš„`getter`å’Œ`setter`ï¼Œä½†æ˜¯Reactä¸­æ²¡æœ‰åšè¿™æ ·çš„å¤„ç†ï¼Œå¦‚æœç›´æ¥æ›´æ”¹çš„è¯ï¼Œreactæ˜¯æ— æ³•å¾—çŸ¥çš„ï¼Œæ‰€ä»¥ï¼Œéœ€è¦ä½¿ç”¨ç‰¹æ®Šçš„æ›´æ”¹çŠ¶æ€çš„æ–¹æ³•`setState`ã€‚

:::warning æ³¨æ„

1. åœ¨å®ä½“ä¸­å®šä¹‰ï¼Œä¸ç”¨this,ç›´æ¥å†™state = {}

   ```jsx
   class App extends Component {
     state = {
       name: 'React',
       isLiked: false
     }
     render () {
       return ()
     }
   }
   ```

2. åœ¨constructæ„é€ å™¨ä¸­ï¼Œéœ€è¦æ˜¯ä½¿ç”¨this.state

   ```jsx
   class App extends Component {
     constructor() {
       super()// è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰ç§æœ‰å˜é‡
       this.state = {
         name: 'React',
         isLiked: false
       }
     }
     render () {
       return ()
     }
   }
   ```

:::

## æ”¹å˜çŠ¶æ€setState

`isLiked` å­˜æ”¾åœ¨å®ä¾‹çš„ `state` å¯¹è±¡å½“ä¸­ï¼Œç»„ä»¶çš„ `render` å‡½æ•°å†…ï¼Œä¼šæ ¹æ®ç»„ä»¶çš„ `state` çš„ä¸­çš„`isLiked`ä¸åŒæ˜¾ç¤ºâ€œå–æ¶ˆâ€æˆ–â€œæ”¶è—â€å†…å®¹ã€‚ä¸‹é¢ç»™ `button` åŠ ä¸Šäº†ç‚¹å‡»çš„äº‹ä»¶ç›‘å¬(**onClick**={handleBtnClick})ã€‚

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  constructor() {
    super()
    this.state = {
      name: 'React',
      isLiked: false
    }
  }
  handleBtnClick = () => {
    this.setState({
      isLiked: !this.state.isLiked
    })
  }
  render () {
    return (
      <div>
        <h1>æ¬¢è¿æ¥åˆ°{this.state.name}çš„ä¸–ç•Œ</h1>
        <button onClick={this.handleBtnClick}>
          {
            this.state.isLiked ? 'â¤ï¸å–æ¶ˆ' : 'ğŸ–¤æ”¶è—'
          }
        </button>
      </div>
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

### `setState`çš„ä¸¤ä¸ªå‚æ•°ï¼š

#### ç¬¬ä¸€ä¸ªå‚æ•°(å¯¹è±¡æˆ–å‡½æ•°)ï¼š

ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–¹æ³•returnä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå‚æ•°å«åš`updater`

- å‚æ•°æ˜¯å¯¹è±¡

  ```jsx
  this.setState({
    isLiked: !this.state.isLiked
  })
  ```

- å‚æ•°æ˜¯æ–¹æ³•

  è¿™ç§æ–¹å¼è¿˜æ˜¯å¼‚æ­¥çš„
  
  ```jsx
  this.setState((prevState, props) => {
    return {
      isLiked: !prevState.isLiked
    }
  })
  ```
  
  æ³¨æ„çš„æ˜¯è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ä¸Šä¸€æ¬¡çš„state, ç¬¬äºŒä¸ªæ˜¯props

#### ç¬¬äºŒä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°

**`setState`æ˜¯å¼‚æ­¥çš„**ï¼Œæ‰€ä»¥æƒ³è¦è·å–åˆ°æœ€æ–°çš„stateï¼Œæ²¡æœ‰åŠæ³•è·å–ï¼Œå°±æœ‰äº†**`ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯é€‰çš„å›è°ƒå‡½æ•°`**

```jsx
this.setState((prevState, props) => {
  return {
    isLiked: !prevState.isLiked
  }
}, () => {
  console.log('å›è°ƒé‡Œçš„',this.state.isLiked)
})
console.log('setStateå¤–éƒ¨çš„',this.state.isLiked)
```

:::tip

setState å¯åŒæ­¥å¯å¼‚æ­¥

1. å¼‚æ­¥æƒ…å†µï¼š

   1. åˆæˆäº‹ä»¶(ç‚¹å‡»äº‹ä»¶onClickç­‰)ï¼Œé‡Œæ˜¯å¼‚æ­¥çš„
   2. ç”Ÿå‘½å‘¨æœŸï¼Œé‡Œæ˜¯å¼‚æ­¥çš„

2. åŒæ­¥æƒ…å†µï¼š

   1. åœ¨å®šæ—¶å™¨é‡Œï¼Œæ˜¯åŒæ­¥çš„

   2. åœ¨åŸç”Ÿjsé‡Œï¼Œæ˜¯åŒæ­¥çš„

      ```js
      document.querySelect('button').addEventListener('click', this.handleClick.bind(this), false)
      const handleClick = () => {
          this.setState({
            isLiked: !this.state.isLiked
          },
          console.log(this.state.isLick)
          )
      }
      ```

      

:::

:::warning

```jsx
handleBtnClick = () => {
    this.setState({
        isShow: !this.state.isShow
    })
    this.setState({
        isShow: !this.state.isShow
    })
}
```

å¦‚æœæŒ‰ç…§ä¸Šè¿°å†™ä»£ç ï¼Œåˆå§‹æ—¶ï¼Œä¸¤ä¸ªsetStateéƒ½æ˜¯å–çš„ä¸€ä¸ªåœ°å€çš„isShowï¼Œ

è€Œä¸æ˜¯ç­‰ç¬¬ä¸€ä¸ªæ‰§è¡Œå®Œï¼Œç¬¬äºŒä¸ªä¼šåœ¨ç¬¬ä¸€ä¸ªåŸºç¡€ä¸Šå–å€¼å†å–å

å¦‚æœéœ€è¦å¤šä¸ªåœ°æ–¹ä½¿ç”¨isShowï¼Œå¹¶ä¸”å¸Œæœ›å€¼èƒ½å¤ŸåŒæ­¥æ”¹å˜ï¼Œä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ªåœ¨ç¬¬ä¸€ä¸ªæ”¹å˜çš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹å˜ï¼šå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç :

å†™ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åå€¼ä½œä¸ºå¯¹è±¡returnå‡ºå»

```jsx
this.setState((prevState, props) => {
  return {
    isShow: !prevState.isShow
  }
})
```

:::

## å±æ€§vsçŠ¶æ€

ç›¸ä¼¼ç‚¹ï¼šéƒ½æ˜¯çº¯jså¯¹è±¡ï¼Œéƒ½ä¼šè§¦å‘renderæ›´æ–°ï¼Œéƒ½å…·æœ‰ç¡®å®šæ€§ï¼ˆçŠ¶æ€/å±æ€§ç›¸åŒï¼Œç»“æœç›¸åŒï¼‰

ä¸åŒç‚¹ï¼š 

1. å±æ€§èƒ½ä»çˆ¶ç»„ä»¶è·å–ï¼ŒçŠ¶æ€ä¸èƒ½
2. å±æ€§å¯ä»¥ç”±çˆ¶ç»„ä»¶ä¿®æ”¹ï¼ŒçŠ¶æ€ä¸èƒ½
3. å±æ€§èƒ½åœ¨å†…éƒ¨è®¾ç½®é»˜è®¤å€¼ï¼ŒçŠ¶æ€ä¹Ÿå¯ä»¥
4. å±æ€§ä¸å¯ä»¥åœ¨ç»„ä»¶å†…éƒ¨ä¿®æ”¹ï¼ŒçŠ¶æ€å¯ä»¥æ”¹
5. å±æ€§èƒ½è®¾ç½®å­ç»„ä»¶åˆå§‹å€¼ï¼ŒçŠ¶æ€ä¸å¯ä»¥
6. å±æ€§å¯ä»¥ä¿®æ”¹å­ç»„ä»¶çš„å€¼ï¼ŒçŠ¶æ€ä¸å¯ä»¥

`state` çš„ä¸»è¦ä½œç”¨æ˜¯ç”¨äºç»„ä»¶ä¿å­˜ã€æ§åˆ¶ã€ä¿®æ”¹è‡ªå·±çš„å¯å˜çŠ¶æ€ã€‚`state` åœ¨ç»„ä»¶å†…éƒ¨åˆå§‹åŒ–ï¼Œå¯ä»¥è¢«ç»„ä»¶è‡ªèº«ä¿®æ”¹ï¼Œè€Œå¤–éƒ¨ä¸èƒ½è®¿é—®ä¹Ÿä¸èƒ½ä¿®æ”¹ã€‚ä½ å¯ä»¥è®¤ä¸º `state` æ˜¯ä¸€ä¸ªå±€éƒ¨çš„ã€åªèƒ½è¢«ç»„ä»¶è‡ªèº«æ§åˆ¶çš„æ•°æ®æºã€‚`state` ä¸­çŠ¶æ€å¯ä»¥é€šè¿‡ `this.setState`æ–¹æ³•è¿›è¡Œæ›´æ–°ï¼Œ`setState` ä¼šå¯¼è‡´ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚

`props` çš„ä¸»è¦ä½œç”¨æ˜¯è®©ä½¿ç”¨è¯¥ç»„ä»¶çš„çˆ¶ç»„ä»¶å¯ä»¥ä¼ å…¥å‚æ•°æ¥é…ç½®è¯¥ç»„ä»¶ã€‚å®ƒæ˜¯å¤–éƒ¨ä¼ è¿›æ¥çš„é…ç½®å‚æ•°ï¼Œç»„ä»¶å†…éƒ¨æ— æ³•æ§åˆ¶ä¹Ÿæ— æ³•ä¿®æ”¹ã€‚é™¤éå¤–éƒ¨ç»„ä»¶ä¸»åŠ¨ä¼ å…¥æ–°çš„ `props`ï¼Œå¦åˆ™ç»„ä»¶çš„ `props` æ°¸è¿œä¿æŒä¸å˜ã€‚

å¦‚æœæä¸æ¸… `state` å’Œ `props` çš„ä½¿ç”¨åœºæ™¯ï¼Œè®°ä½ä¸€ä¸ªç®€å•çš„è§„åˆ™ï¼š**å°½é‡å°‘åœ°ç”¨ `state`ï¼Œå¤šç”¨ `props`**ã€‚

æ²¡æœ‰ `state` çš„ç»„ä»¶å«æ— çŠ¶æ€ç»„ä»¶ï¼ˆstateless componentï¼‰ï¼Œè®¾ç½®äº† state çš„å«åšæœ‰çŠ¶æ€ç»„ä»¶ï¼ˆstateful componentï¼‰ã€‚å› ä¸ºçŠ¶æ€ä¼šå¸¦æ¥ç®¡ç†çš„å¤æ‚æ€§ï¼Œæˆ‘ä»¬å°½é‡å¤šåœ°å†™æ— çŠ¶æ€ç»„ä»¶ï¼Œå°½é‡å°‘åœ°å†™æœ‰çŠ¶æ€çš„ç»„ä»¶ã€‚è¿™æ ·ä¼šé™ä½ä»£ç ç»´æŠ¤çš„éš¾åº¦ï¼Œä¹Ÿä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢å¼ºç»„ä»¶çš„å¯å¤ç”¨æ€§ã€‚

## çŠ¶æ€æå‡

å¦‚æœæœ‰å¤šä¸ªç»„ä»¶å…±äº«ä¸€ä¸ªæ•°æ®ï¼ŒæŠŠè¿™ä¸ªæ•°æ®æ”¾åˆ°å…±åŒçš„çˆ¶çº§ç»„ä»¶ä¸­æ¥ç®¡ç†

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  constructor() {
    super()
    this.state = {
      num: 0
    }
  }
  getCount(childNum) {
      // æ¥æ”¶Child1 ä¼ è¿›æ¥çš„å€¼
      this.setState({
          num: childNum
      })
  }
  render () {
    return (
      <div>
        <Child1 onGetCount={this.getCount.bind(this)} />
        <Child2 num={this.state.num}/>
      </div>
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)

// å­ç»„ä»¶1
class Child1 extends Component {
    state = {
        count: 5
    }
  render () {
    return (
      <div onClick = {this.props.onGetCount.bind(this,this.state.count)}>
       æŒ‰é’®
      </div>
  	)
  }
}
// å­ç»„ä»¶2
const Child2 = (props) => {
    return (
    	<div>{ props.num }</div>
    )
}
```

## å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶ 

Reactç»„ä»¶çš„æ•°æ®æ¸²æŸ“æ˜¯å¦è¢«è°ƒç”¨è€…ä¼ é€’çš„`props`å®Œå…¨æ§åˆ¶ï¼Œæ§åˆ¶åˆ™ä¸ºå—æ§ç»„ä»¶ï¼Œå¦åˆ™éå—æ§ç»„ä»¶ã€‚



## æ¸²æŸ“æ•°æ®

### æ¡ä»¶æ¸²æŸ“

```jsx
{
  condition ? 'â¤ï¸å–æ¶ˆ' : 'ğŸ–¤æ”¶è—'
}
```

### åˆ—è¡¨æ¸²æŸ“

```jsx
// æ•°æ®
const people = [{
  id: 1,
  name: 'Leo',
  age: 35
}, {
  id: 2,
  name: 'XiaoMing',
  age: 16
}]
// æ¸²æŸ“åˆ—è¡¨
{
  people.map(person => {
    return (
      <dl key={person.id}>
        <dt>{person.name}</dt>
        <dd>age: {person.age}</dd>
      </dl>
    )
  })
}
```

Reactçš„é«˜æ•ˆä¾èµ–äºæ‰€è°“çš„ Virtual-DOMï¼Œå°½é‡ä¸ç¢° DOMã€‚å¯¹äºåˆ—è¡¨å…ƒç´ æ¥è¯´ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå…ƒç´ å¯èƒ½ä¼šåœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­æ”¹å˜ä½ç½®ã€‚è¦å®ç°è¿™ä¸ªæ“ä½œï¼Œåªéœ€è¦äº¤æ¢ä¸€ä¸‹ DOM ä½ç½®å°±è¡Œäº†ï¼Œä½†æ˜¯Reactå¹¶ä¸çŸ¥é“å…¶å®æˆ‘ä»¬åªæ˜¯æ”¹å˜äº†å…ƒç´ çš„ä½ç½®ï¼Œæ‰€ä»¥å®ƒä¼šé‡æ–°æ¸²æŸ“åé¢ä¸¤ä¸ªå…ƒç´ ï¼ˆå†æ‰§è¡Œ Virtual-DOM ï¼‰ï¼Œè¿™æ ·ä¼šå¤§å¤§å¢åŠ  DOM æ“ä½œã€‚ä½†å¦‚æœç»™æ¯ä¸ªå…ƒç´ åŠ ä¸Šå”¯ä¸€çš„æ ‡è¯†ï¼ŒReact å°±å¯ä»¥çŸ¥é“è¿™ä¸¤ä¸ªå…ƒç´ åªæ˜¯äº¤æ¢äº†ä½ç½®ï¼Œè¿™ä¸ªæ ‡è¯†å°±æ˜¯```key```ï¼Œè¿™ä¸ª `key` å¿…é¡»æ˜¯æ¯ä¸ªå…ƒç´ å”¯ä¸€çš„æ ‡è¯†

### dangerouslySetInnerHTML

å¯¹äºå¯Œæ–‡æœ¬åˆ›å»ºçš„å†…å®¹ï¼Œåå°æ‹¿åˆ°çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š

```js
content = "<p>React.jsæ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</p>"
```

å¤„äºå®‰å…¨çš„åŸå› ï¼ŒReactå½“ä¸­æ‰€æœ‰è¡¨è¾¾å¼çš„å†…å®¹ä¼šè¢«è½¬ä¹‰ï¼Œå¦‚æœç›´æ¥è¾“å…¥ï¼Œæ ‡ç­¾ä¼šè¢«å½“æˆæ–‡æœ¬ã€‚è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨`dangerouslySetHTML`å±æ€§ï¼Œå®ƒå…è®¸æˆ‘ä»¬åŠ¨æ€è®¾ç½®`innerHTML`

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  constructor() {
    super()
    this.state = {
      content : "<p>React.jsæ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</p>"
    }
  }
  render () {
    return (
  		<div
        // æ³¨æ„è¿™é‡Œæ˜¯ä¸¤ä¸ªä¸‹ä¸‹åˆ’çº¿ __html
        dangerouslySetInnerHTML={{__html: this.state.content}}
      />
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```









